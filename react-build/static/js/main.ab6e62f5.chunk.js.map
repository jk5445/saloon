{"version":3,"sources":["_helpers/ClearClasses.js","services/fetch.js","services/user.service.js","hooks/useAuth.js","hooks/useReload.js","hooks/useUser.js","components/Header.js","components/Navigation.js","components/Persist.js","_helpers/randomColor.js","components/CardRow.js","services/conversation.service.js","hooks/useFeed.js","pages/Home.js","pages/About.js","components/Form.js","pages/Login.js","services/authentication.service.js","pages/Register.js","pages/Account.js","pages/Profile.js","components/Sidebar.js","components/ConfiguredQuill.js","components/ConfiguredInterweave.js","components/Contributors.js","services/comment.service.js","pages/Conversation.js","hooks/useConversation.js","hooks/useComments.js","pages/Post.js","App.js","serviceWorker.js","index.js"],"names":["ClearClasses","children","nClassName","React","Children","map","child","isValidElement","cloneElement","className","newFetch","url","method","headers","body","options","fullUrl","path","join","encode","fetch","JSON","stringify","undefined","then","resp","a","ok","json","Promise","resolve","getUser","token","Authorization","getLiked","useAuth","useContext","AuthContext","useReload","useState","reload","setReload","useUser","setToken","isLoggedIn","setIsLoggedIn","user","setUser","useEffect","userService","u","catch","_","useProfile","id","profile","setProfile","Search","props","placeholder","disabled","size","color","UserDropdown","name","invites","redirect","open","setOpen","toggle","DropdownLink","to","other","DropdownItem","onClick","Dropdown","isOpen","nav","DropdownToggle","caret","DropdownMenu","right","window","innerWidth","InvitesDropdown","divider","length","acceptInviteClick","e","convo_id","acceptInvite","stopPropagation","InviteItem","Button","outline","style","marginRight","rejectInviteClick","direction","Badge","marginLeft","invite","key","title","withRouter","reloadUser","first_name","history","push","NavLink","location","pathname","includes","Navigation","Persist","persist","debounce","data","localStorage","setItem","isEqual","this","getItem","onMount","parse","onComplete","Component","defaultProps","randomColor","username","randCol","seed","Card","navigate","useHistory","contributors","round","DiscussedBy","age","views","list","CardRow","cards","noflex","card","getConversation","postContributor","useFeed","didPersistLoad","feed","setFeed","conversationService","convos","Home","width","useWindowWidth","splitFeed","chunk","i","About","Field","render","msg","replace","Login","state","from","initialValues","email","password","onSubmit","actions","authenticationService","setErrors","setSubmitting","isSubmitting","type","Register","last_name","vals","setFieldError","validationSchema","Yup","shape","required","Account","liked","setLiked","useLiked","Profile","match","params","Sidebar","showing","setShowing","toggleShowing","selectedIndex","setSelected","activeMeta","ActiveChildElement","count","useMemo","forEach","index","Icon","icon","handleIconClick","ConfiguredQuill","value","setValue","otherProps","theme","modules","toolbar","formats","onChange","x","ConfiguredInterweave","matchers","UrlMatcher","missingPropWarning","propName","noRet","console","warn","Contributors","SECTION_COMPONENT_LOOKUP","invited","InvitedSection","active","ActiveSection","sections","noTitle","section","InviteBar","onInvite","newUser","toLowerCase","trim","ContributorSection","Contributor","src","image","inputRef","inviteUser","focus","autoComplete","currentTarget","onKeyDown","ref","input","getComments","Title","votes","userVote","updateVote","isContributor","TitleVote","setVote","nVote","Discussion","posts","setBody","submit","item","DiscussionItem","contributor","time_of_post","post","content","Comments","newComment","setNewComment","setIsSubmitting","comments","comment","Comment","time_of_comment","postComment","upvoted","setUpvoted","fontSize","Conversation","convoReload","reloadConvo","commentReload","reloadComments","convo","conversation","setConvo","useConversation","setComments","commentService","useComments","setPost","setInvited","vote","GoCommentDiscussion","GoOrganization","transition","Post","setTitle","submitting","Editor","reject","Spinner","css","val","createContext","SecuredRoute","component","authenticated","rest","App","setPersistLoad","Provider","exact","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ab6e62f5.chunk.js","sourcesContent":["import React from 'react'\n\nfunction ClearClasses({ children, nClassName }) {\n  return React.Children.map(children, child => {\n    if (!React.isValidElement(child)) return\n\n    return React.cloneElement(child, {\n      className: nClassName,\n    })\n  })\n}\n\nexport default ClearClasses\n","import path from 'path'\nimport { encode } from 'querystring'\n\nconst isDev = () =>\n  !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\n\n/**\n *\n * @param {string} url\n * @param {import(\"http\").RequestOptions} options\n */\nexport default function newFetch(\n  url,\n  { method = 'GET', headers, body, ...options }\n) {\n  const fullUrl =\n    path.join(\n      isDev() ? 'https://agile-tor-73556.herokuapp.com/api/v1' : '/api/v1',\n      url\n    ) + (method === 'GET' && body ? `?${encode(body)}` : '')\n\n  return fetch(fullUrl, {\n    headers: { 'Content-Type': 'application/json', ...headers },\n    ...options,\n    method,\n    body: method !== 'GET' ? JSON.stringify(body) : undefined,\n  }).then(async resp => {\n    if (resp.ok) {\n      try {\n        const json = await resp.json()\n\n        return json\n      } catch (_) {\n        return Promise.resolve()\n      }\n    }\n\n    throw resp\n  })\n}\n","import fetch from './fetch'\n\nexport function getUser(token) {\n  return fetch('/user', { headers: { Authorization: token } })\n}\n\nexport function acceptInvite(token, convo_id) {\n  return fetch('/contributor', {\n    method: 'PUT',\n    headers: { Authorization: token },\n    body: { convo_id },\n  })\n}\n\nexport function getLiked(token) {\n  return fetch('/user/liked', { headers: { Authorization: token } })\n}\n\nexport function getProfile(id) {\n  return fetch(`/profile/${id}`, { method: 'GET' })\n}\n","import { useContext } from 'react'\nimport { AuthContext } from '../App'\n\nexport default function useAuth() {\n  return useContext(AuthContext)\n}\n","import { useState } from \"react\";\n\nexport default function useReload() {\n  const [reload, setReload] = useState(-1);\n\n  return [reload, () => setReload(-reload)];\n}","import { useState, useEffect } from 'react'\n\nimport * as userService from '../services/user.service'\n\nimport useAuth from './useAuth'\n\nexport function useUser({ reload } = {}) {\n  const { token, setToken, isLoggedIn, setIsLoggedIn } = useAuth()\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    if (!token || !isLoggedIn) return\n\n    const logout = () => {\n      setToken(null)\n      setIsLoggedIn(false)\n      setUser(null)\n    }\n\n    userService\n      .getUser(token)\n      .then((u) => setUser(u))\n      .catch((_) => logout())\n  }, [token, setToken, isLoggedIn, setIsLoggedIn, reload])\n\n  return user\n}\n\nexport function useLiked({ reload } = {}) {\n  const { token, isLoggedIn } = useAuth()\n  const [liked, setLiked] = useState(null)\n\n  useEffect(() => {\n    if (!token || !isLoggedIn) return\n\n    userService\n      .getLiked(token)\n      .then((liked) => setLiked(liked))\n      .catch((_) => setLiked(null))\n  }, [token, isLoggedIn, reload])\n\n  return liked\n}\n\nexport function useProfile(id) {\n  const [profile, setProfile] = useState(null)\n\n  useEffect(() => {\n    userService\n      .getProfile(id)\n      .then((u) => setProfile(u))\n      .catch((_) => setProfile(null))\n  })\n\n  return profile\n}\n","import React, { useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { Link } from 'react-router-dom'\nimport { GoSearch, GoCheck, GoX } from 'react-icons/go'\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Badge,\n  Button,\n} from 'reactstrap'\n\nimport ClearClasses from '../_helpers/ClearClasses'\n\nimport { acceptInvite } from '../services/user.service'\n\nimport useAuth from '../hooks/useAuth'\nimport useReload from '../hooks/useReload'\nimport { useUser } from '../hooks/useUser'\n\nimport './styles/Header.scss'\n\nfunction Header(props) {\n  const { isLoggedIn } = useAuth()\n  const [reload, reloadUser] = useReload()\n  const user = useUser({ reload })\n\n  return (\n    <div className=\"header\">\n      <span id=\"logo\">\n        <Link to=\"/\" className=\"saloon\">\n          Saloon\n        </Link>\n        <span id=\"slogan\">Conversation Reimagined</span>\n      </span>\n      <div className=\"search\">\n        <Search />\n        {isLoggedIn && (\n          <Link to=\"/post\" className=\"login-account\">\n            Post\n          </Link>\n        )}\n      </div>\n      {isLoggedIn ? (\n        <UserDropdown\n          name={user?.first_name}\n          invites={user?.invites}\n          redirect={props.history.push}\n          reload={reloadUser}\n        />\n      ) : (\n        <div className=\"login-account\">\n          <Link to=\"/login\">Login</Link>\n          <Link to=\"/register\">Sign Up</Link>\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction Search(props) {\n  return (\n    <div className=\"search-wrapper\">\n      <input\n        placeholder=\"Out for lunch, come back later  â€“Searchbar\"\n        disabled\n      />\n      <div className=\"i-wrapper\">\n        <div className=\"body\">\n          <GoSearch size={20} className=\"icon\" color=\"white\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction UserDropdown({ name, invites, redirect, reload }) {\n  const [open, setOpen] = useState(false)\n  const { setIsLoggedIn, setToken } = useAuth()\n\n  const toggle = () => setOpen(!open)\n\n  const signOut = () => {\n    setToken(null)\n    setIsLoggedIn(false)\n    redirect('/')\n  }\n\n  const DropdownLink = ({ to, ...other }) => (\n    <DropdownItem onClick={() => redirect(to)} {...other} />\n  )\n\n  return (\n    <Dropdown isOpen={open} toggle={toggle} nav>\n      <DropdownToggle caret className=\"login-account\">\n        {name ? `Hey, ${name}` : 'Hey!'}\n      </DropdownToggle>\n      <DropdownMenu right>\n        {window.innerWidth < 500 && (\n          <DropdownLink to=\"/post\">Post</DropdownLink>\n        )}\n\n        <DropdownLink to=\"/account\">My Account</DropdownLink>\n\n        <InvitesDropdown\n          invites={invites}\n          redirect={(to) => {\n            toggle()\n            redirect(to)\n          }}\n          reload={reload}\n        />\n\n        <DropdownItem divider />\n        <DropdownLink to=\"/settings\">Settings</DropdownLink>\n        <DropdownItem divider />\n        <DropdownItem onClick={signOut}>Log Out</DropdownItem>\n      </DropdownMenu>\n    </Dropdown>\n  )\n}\n\nfunction InvitesDropdown({ invites = [], redirect, reload }) {\n  const [open, setOpen] = useState(false)\n  const { token } = useAuth()\n\n  const toggle = () => {\n    if (invites?.length < 1) {\n      setOpen(false)\n      return\n    }\n\n    setOpen(!open)\n  }\n\n  const acceptInviteClick = (e, token, id) => {\n    acceptInvite(token, id)\n      .then((_) => reload())\n      .catch((_) => reload()) // Send little popup in the future\n\n    e.stopPropagation()\n  }\n\n  const rejectInviteClick = (e, token, id) => {\n    // rejectInvite(token, id)\n    // .then(_ => reload())\n    // .catch(_ => reload()) // Send little popup in the future\n\n    e.stopPropagation()\n  }\n\n  function InviteItem({ children: name, id }) {\n    return (\n      <div\n        className=\"sub-item dropdown-item\"\n        onClick={() => {\n          toggle()\n          redirect(`/conversation/${id}`)\n        }}\n      >\n        <div className=\"title\">{name}</div>\n        <span className=\"buttons\">\n          <Button\n            outline\n            size=\"sm\"\n            color=\"success\"\n            style={{ marginRight: '5px' }}\n            onClick={(e) => acceptInviteClick(e, token, id)}\n          >\n            <GoCheck />\n          </Button>\n          <Button\n            outline\n            size=\"sm\"\n            color=\"danger\"\n            onClick={(e) => rejectInviteClick(e, token, id)}\n          >\n            <GoX />\n          </Button>\n        </span>\n      </div>\n    )\n  }\n\n  return (\n    <Dropdown isOpen={open} toggle={toggle} direction=\"left\">\n      <ClearClasses nClassName=\"dropdown-item\">\n        <DropdownToggle>\n          Invitations\n          <Badge style={{ marginLeft: '20px' }}>{invites?.length ?? 0}</Badge>\n        </DropdownToggle>\n      </ClearClasses>\n      <DropdownMenu>\n        {invites.map((invite) => (\n          <InviteItem\n            key={`Notification/${invite.convo_id}`}\n            id={invite.convo_id}\n          >\n            {invite.title}\n          </InviteItem>\n        ))}\n      </DropdownMenu>\n    </Dropdown>\n  )\n}\n\nexport default withRouter(Header)\n","import React from 'react'\nimport { Link, withRouter } from 'react-router-dom'\n\nimport './styles/Navigation.scss'\n\nfunction Navigation() {\n  return (\n    <div className=\"navigation\">\n      <div className=\"links\">\n        <NavLink to=\"/home\">Home</NavLink>\n        <NavLink to=\"/about\">About</NavLink>\n      </div>\n    </div>\n  )\n}\n\nconst NavLink = withRouter(props => {\n  const isSelected = () => props.location.pathname.includes(props.to)\n\n  return (\n    <Link\n      to={props.to}\n      className={[isSelected() ? 'selected' : '', 'nav-item'].join(' ')}\n    >\n      {props.children}\n    </Link>\n  )\n})\n\nexport default Navigation\n","/**\n * Modified from github:charlax/react-persist#patch-1\n */\n\nimport React from 'react'\nimport debounce from 'lodash.debounce'\nimport isEqual from 'lodash.isequal'\n\nexport default class Persist extends React.Component {\n  static defaultProps = {\n    debounce: 300,\n  }\n\n  persist = debounce(data => {\n    window.localStorage.setItem(this.props.name, JSON.stringify(data))\n  }, this.props.debounce)\n\n  componentDidUpdate({ data }) {\n    if (!isEqual(data, this.props.data)) {\n      this.persist(this.props.data)\n    }\n  }\n\n  componentDidMount() {\n    const data = window.localStorage.getItem(this.props.name)\n    if (data && data !== null) {\n      this.props.onMount(JSON.parse(data))\n    }\n\n    if (this.props.onComplete) this.props.onComplete()\n  }\n\n  render() {\n    return null\n  }\n}\n","import * as randCol from 'randomcolor'\n\n/**\n *\n * @param {string} username to be used as seed\n */\nexport function randomColor(username) {\n  return randCol({ seed: username })\n}\n","import React from 'react'\nimport Avatar from 'react-avatar'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { randomColor } from '../_helpers'\n\nimport './styles/CardRow.scss'\n\n/**\n *\n * @param {{ cards: Object[] noflex: Boolean }} props\n */\nfunction CardRow({ cards = [], noflex = false }) {\n  return (\n    <div className={`card-row ${noflex ? 'noflex' : 'flex'}`}>\n      {cards?.length > 1 && !noflex ? <div className=\"connector\" /> : null}\n      {cards?.map((card) => (\n        <Card {...card} key={`CardRow/${card.convo_id}`} />\n      ))}\n    </div>\n  )\n}\n\nfunction Card(props) {\n  const AVATAR_SIZE = 45\n\n  const history = useHistory()\n  const navigate = history.push\n\n  return (\n    <div\n      className=\"xcard\"\n      onClick={() => navigate(`/conversation/${props.convo_id}`)}\n    >\n      <div className=\"title\">{props.title}</div>\n      <Avatar\n        name={props.contributors?.[0]}\n        round\n        size={AVATAR_SIZE}\n        color={randomColor(props.contributors?.[0])}\n      />\n      {props.contributors.length > 1 && (\n        <Avatar\n          name={props.contributors[1]}\n          round\n          size={AVATAR_SIZE}\n          color={randomColor(props.contributors?.[1])}\n        />\n      )}\n      <DiscussedBy contributors={props.contributors || []} />\n      <div className=\"age\">{props.age}</div>\n      <div className=\"views\">{props.views} Views</div>\n    </div>\n  )\n}\n\nfunction DiscussedBy({ contributors }) {\n  const format = (list) => {\n    if (list.length === 1) return list[0]\n    else if (list.length === 2) return `${list[0]} and ${list[1]}`\n    else if (list.length === 3) return `${list[0]}, ${list[1]} and ${list[2]}`\n    else if (list.length === 4)\n      return `${list[0]}, ${list[1]}, ${list[2]} and ${list[3]}`\n  }\n\n  return (\n    <div className=\"discussed-by\">Discussion by {format(contributors)}</div>\n  )\n}\n\nexport default CardRow\n","import fetch from './fetch'\n\nexport function getFeed(token) {\n  return fetch('/feed', {\n    method: 'GET',\n    headers: token ? { Authorization: token } : undefined,\n  })\n}\n\nexport function getConversation(id, { token } = {}) {\n  return fetch(`/convo/${id}`, {\n    method: 'GET',\n    headers: token ? { Authorization: token } : undefined,\n  })\n}\n\nexport function postConversation(token, { title, body }) {\n  return fetch('/convo', {\n    method: 'POST',\n    headers: { Authorization: token },\n    body: { title, post: body },\n  })\n}\n\nexport function putVote(id, { token, vote }) {\n  return fetch(`/convo/${id}/vote/${vote}`, {\n    method: 'PUT',\n    headers: token ? { Authorization: token } : undefined,\n  })\n}\n\nexport function postConversationPost(token, { convo_id, post }) {\n  return fetch('/post', {\n    method: 'POST',\n    headers: { Authorization: token },\n    body: { convo_id, post },\n  })\n}\n\nexport function postContributor(user, { convo_id, token }) {\n  return fetch('/contributor', {\n    method: 'POST',\n    headers: { Authorization: token },\n    body: { convo_id, invite: user },\n  })\n}\n","import { useState, useEffect } from 'react'\n\nimport * as conversationService from '../services/conversation.service'\n\nimport useAuth from './useAuth'\n\nexport default function useFeed() {\n  const {\n    token,\n    setToken,\n    isLoggedIn,\n    setIsLoggedIn,\n    didPersistLoad,\n  } = useAuth()\n  const [feed, setFeed] = useState(null)\n\n  useEffect(() => {\n    if (feed || !didPersistLoad) return\n\n    const logout = () => {\n      setToken(null)\n      setIsLoggedIn(false)\n      setFeed(null)\n    }\n\n    conversationService\n      .getFeed(token)\n      .then(u => setFeed(u.convos))\n      .catch(_ => logout())\n  }, [token, feed, setToken, isLoggedIn, setIsLoggedIn, didPersistLoad])\n\n  return feed\n}\n","import React from 'react'\n\nimport CardRow from '../components/CardRow'\n\nimport useFeed from '../hooks/useFeed'\nimport { useWindowWidth } from '@react-hook/window-size'\n\nimport chunk from 'lodash.chunk'\n\nfunction Home() {\n  const feed = useFeed()\n  const width = useWindowWidth()\n\n  const splitFeed = chunk(feed, width < 925 ? 1 : width < 1260 ? 2 : 3)\n\n  return (\n    <div className=\"column-page\">\n      {splitFeed.map((cards, i) => (\n        <CardRow cards={cards} key={`CardRow/${i}`} />\n      ))}\n    </div>\n  )\n}\n\nexport default Home\n","import React from 'react'\n\nimport './styles/About.scss'\n\nfunction About() {\n  return (\n    <div className=\"about\">\n      <div id=\"title\">About Saloon</div>\n      <div className=\"editor\">\n        <div className=\"quill\">\n          <div className=\"ql-toolbar ql-snow\"></div>\n          <div className=\"ql-container ql-snow\">\n            <div>\n              Saloon provides a space for HEALTHY and NUANCED conversations by\n              making sure your conversations go uninterrupted AND by making sure\n              your voices are heard.\n            </div>\n\n            <div className=\"bold-y-margin\">How we do it</div>\n\n            <div>We keep conversations CLEAR:</div>\n            <div>\n              When you start a conversation on Saloon, only you can decide who\n              joins.\n            </div>\n\n            <div className=\"pad-top\">Our conversations are always LIVE:</div>\n            <div>\n              Saloon conversations never end, so they can be added to whenever\n              inspiration strikes!\n            </div>\n\n            <div className=\"pad-top\">Comments mean MORE on Saloon:</div>\n            <div>Since all of our conversations are live, so are comments!</div>\n            <div>\n              That means posters on Saloon can engage with reader feedback\n              during conversations!\n            </div>\n\n            <div className=\"bold-y-margin\">\n              Here are some tips to get the most out of your Saloon\n              Conversations\n            </div>\n            <div className=\"tip\">Be Respectful</div>\n            <div className=\"tip\">Be Disagreeable</div>\n            <div className=\"tip\">Be Honest</div>\n            <div className=\"tip\">Be Clear and Consice</div>\n            <div className=\"last\">and last but not least...</div>\n            <div className=\"bold-y-margin fun\">Have Fun!!</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default About\n","import React from 'react'\nimport { Formik, Form, Field as FormikField, ErrorMessage } from 'formik'\n\nimport './styles/Form.scss'\n\nfunction Field(props) {\n  return (\n    <>\n      <div className=\"field-title\">{props.placeholder}</div>\n      <FormikField {...props} />\n      <ErrorMessage\n        name={props.name}\n        render={msg => <div className=\"error\">{msg.replace('_', ' ')}</div>}\n      />\n    </>\n  )\n}\n\nexport { Formik, Form, Field }\n","import React from 'react'\nimport { Link, Redirect } from 'react-router-dom'\nimport { Formik, Form, Field } from '../components/Form'\n\nimport * as authenticationService from '../services/authentication.service'\n\nimport useAuth from '../hooks/useAuth'\n\nfunction Login(props) {\n  const { isLoggedIn, setIsLoggedIn, setToken } = useAuth()\n\n  return isLoggedIn ? (\n    <Redirect\n      to={props.location.state ? props.location.state.from.pathname : '/'}\n    />\n  ) : (\n    <div className=\"form\">\n      <h1>Login</h1>\n      <Formik\n        initialValues={{ email: '', password: '' }}\n        onSubmit={({ email, password }, actions) => {\n          authenticationService\n            .login(email, password)\n            .then(data => {\n              setToken(data.token)\n              setIsLoggedIn(true)\n            })\n            .catch(e => {\n              actions.setErrors({\n                password: 'incorrect password',\n              })\n              actions.setSubmitting(false)\n            })\n        }}\n      >\n        {({ isSubmitting }) => (\n          <Form>\n            <Field type=\"text\" name=\"email\" placeholder=\"email\" />\n            <Field type=\"password\" name=\"password\" placeholder=\"password\" />\n            <button type=\"submit\" disabled={isSubmitting}>\n              Submit\n            </button>\n            <div className=\"switch-here\">\n              Don't have an account? Join <Link to=\"/register\">here</Link>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  )\n}\n\nexport default Login\n","import fetch from './fetch'\n\nexport function login(email, password) {\n  return fetch('/user/login', { method: 'POST', body: { email, password } })\n}\n\nexport function register({ username, password, first_name, last_name, email }) {\n  return fetch('/user/signup', {\n    method: 'POST',\n    body: { username, first_name, last_name, password, email },\n  })\n}\n","import React from 'react'\nimport { Link, Redirect } from 'react-router-dom'\nimport { Formik, Form, Field } from '../components/Form'\nimport * as Yup from 'yup'\n\nimport * as authenticationService from '../services/authentication.service'\n\nimport useAuth from '../hooks/useAuth'\n\nfunction Register() {\n  const { setToken, setIsLoggedIn, isLoggedIn } = useAuth()\n\n  return isLoggedIn ? (\n    <Redirect to=\"/home\" />\n  ) : (\n    <div className=\"form\">\n      <h1>Register</h1>\n      <Formik\n        initialValues={{\n          username: '',\n          password: '',\n          first_name: '',\n          last_name: '',\n          email: '',\n        }}\n        onSubmit={(vals, actions) => {\n          authenticationService\n            .register(vals)\n            .then(data => {\n              setToken(data.token)\n              setIsLoggedIn(true)\n            })\n            .catch(_ => actions.setFieldError('email', 'something went wrong'))\n        }}\n        validationSchema={Yup.object().shape({\n          first_name: Yup.string().required(),\n          last_name: Yup.string().required(),\n          username: Yup.string().required(),\n          password: Yup.string().required(),\n        })}\n      >\n        {({ isSubmitting }) => (\n          <Form>\n            <Field type=\"email\" name=\"email\" placeholder=\"email\" />\n            <Field type=\"text\" name=\"first_name\" placeholder=\"first name\" />\n            <Field type=\"text\" name=\"last_name\" placeholder=\"last name\" />\n            <Field type=\"text\" name=\"username\" placeholder=\"username\" />\n            <Field type=\"password\" name=\"password\" placeholder=\"password\" />\n            <button type=\"submit\" disabled={isSubmitting}>\n              Submit\n            </button>\n            <div className=\"switch-here\">\n              Already have an account? Login <Link to=\"/login\">here</Link>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  )\n}\n\nexport default Register\n","import React from 'react'\n\nimport CardRow from '../components/CardRow'\n\nimport { useUser, useLiked } from '../hooks/useUser'\n\nimport './styles/Account.scss'\n\nfunction Account() {\n  const user = useUser()\n  const liked = useLiked()\n\n  return (\n    <div className=\"column-page\">\n      <div className=\"user-name\">{`${user?.first_name ?? 'John'} ${\n        user?.last_name ?? 'Smith'\n      }`}</div>\n\n      <div className=\"section\">Liked Posts</div>\n      <CardRow cards={liked?.convos} noflex />\n\n      <div className=\"section\">My Posts</div>\n      <CardRow cards={user?.convos} noflex />\n    </div>\n  )\n}\n\nexport default Account\n","import React from 'react'\n\nimport CardRow from '../components/CardRow'\n\nimport { useProfile } from '../hooks/useUser'\n\nimport './styles/Account.scss'\n\nfunction Profile(props) {\n  const id = props.match.params.id\n  const user = useProfile(id)\n\n  return (\n    <div className=\"column-page\">\n      <div className=\"user-name\">{`${user?.first_name ?? 'John'} ${\n        user?.last_name ?? 'Smith'\n      }`}</div>\n\n      <div className=\"section\">{`${user?.first_name ?? 'John'}`}'s Posts</div>\n      <CardRow cards={user?.convos} noflex />\n    </div>\n  )\n}\n\nexport default Profile\n","import React, { useState, useMemo } from 'react'\n\nimport './styles/Sidebar.scss'\n\nfunction Sidebar(props) {\n  const { children } = props\n\n  const [showing, setShowing] = useState(false)\n  const toggleShowing = () => setShowing(!showing)\n\n  const [selectedIndex, setSelected] = useState(0)\n\n  const activeMeta = []\n\n  function handleIconClick(index) {\n    if (index === selectedIndex) toggleShowing()\n    else {\n      if (showing === false) toggleShowing()\n      setSelected(index)\n    }\n  }\n\n  function ActiveChildElement() {\n    const count = React.Children.count(children)\n    return count === 0 ? null : count === 1 ? children : children[selectedIndex]\n  }\n\n  useMemo(\n    () =>\n      React.Children.forEach(children, (child, i) => {\n        if (!React.isValidElement(child)) return\n\n        activeMeta.push({\n          index: i,\n          Icon: child.props.icon,\n          title: child.props.title,\n          style: child.props.style,\n        })\n      }),\n    [children, activeMeta]\n  )\n\n  return (\n    <div\n      className={`sidebar ${showing ? '' : 'minimized'}`}\n      style={activeMeta[selectedIndex].style || {}}\n    >\n      <div className=\"icons\">\n        {activeMeta.map(({ index, Icon }) => {\n          return (\n            <div\n              className=\"icon\"\n              key={`Sidebar/Icon/${index}`}\n              onClick={() => handleIconClick(index)}\n            >\n              <Icon />\n            </div>\n          )\n        })}\n      </div>\n      <div className={`sidebar-inner ${showing ? '' : 'fade'}`}>\n        <div className=\"section-title\">{activeMeta[selectedIndex].title}</div>\n        {<ActiveChildElement />}\n      </div>\n    </div>\n  )\n}\n\nexport default Sidebar\n","import React from 'react'\nimport ReactQuill from 'react-quill'\n\nexport default function ConfiguredQuill(props) {\n  const { value, setValue, ...otherProps } = props\n\n  return (\n    <ReactQuill\n      theme=\"snow\"\n      modules={{\n        toolbar: [['bold', 'italic', 'underline', 'strike'], ['link']],\n      }}\n      formats={['bold', 'italic', 'underline', 'strike', 'link']}\n      value={value || ''}\n      onChange={x => setValue(x)}\n      {...otherProps}\n    />\n  )\n}\n","import React from 'react'\nimport Interweave from 'interweave'\nimport { UrlMatcher } from 'interweave-autolink'\n\nexport default function ConfiguredInterweave(props) {\n  return <Interweave matchers={[new UrlMatcher('url')]} {...props} />\n}\n","import React, { useState } from 'react'\n\nimport { FiArrowRightCircle } from 'react-icons/fi'\nimport Avatar from 'react-avatar'\n\nimport { useUser } from '../hooks/useUser'\n\nimport { randomColor } from '../_helpers'\n\nimport './styles/Contributors.scss'\n\nconst missingPropWarning = (propName, noRet) => {\n  console.warn(`Contributors component was not given an '${propName}' prop`)\n  return !noRet ? null : []\n}\n\n/**\n *\n * @param {{ sections: [\"invited\" | \"active\"], ...other }} props\n */\nexport default function Contributors(props) {\n  const user = useUser()\n\n  const SECTION_COMPONENT_LOOKUP = {\n    invited: InvitedSection,\n    active: ActiveSection,\n  }\n\n  const invite = (newUser) => {\n    if (\n      !props.invited.includes(newUser) &&\n      newUser.toLowerCase() !== (user ? user.username.toLowerCase() : null) &&\n      newUser.trim() !== ''\n    )\n      props.onInvite(newUser)\n  }\n\n  const sections = props.sections || []\n  return (\n    <div className=\"contributors\">\n      {!props.noTitle && <div>Contributors</div>}\n      {sections.map((section, i) => {\n        const Component = SECTION_COMPONENT_LOOKUP[section]\n        return <Component key={`Contributors/${section}/${i}`} {...props} />\n      })}\n      <InviteBar onInvite={invite || (() => missingPropWarning('onInvite'))} />\n      {props.children}\n    </div>\n  )\n}\n\nfunction ActiveSection(props) {\n  return (\n    <ContributorSection\n      color=\"black\"\n      contributors={props.active || missingPropWarning('active')}\n    >\n      Active\n    </ContributorSection>\n  )\n}\n\nfunction InvitedSection(props) {\n  return (\n    <ContributorSection\n      color=\"gray\"\n      contributors={props.invited || missingPropWarning('invited')}\n    >\n      Invited\n    </ContributorSection>\n  )\n}\n\nfunction ContributorSection(props) {\n  const { color, contributors, children } = props\n\n  return (\n    <div className=\"section\">\n      <div className=\"title\">{children}</div>\n      <div className=\"users\">\n        {(contributors || []).map((invite) => (\n          <Contributor key={`invite/${invite}`} color={color}>\n            {invite}\n          </Contributor>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nfunction Contributor(props) {\n  const { color = undefined } = props\n  return (\n    <div className=\"user\">\n      <Avatar\n        name={props.children}\n        src={props.image || null}\n        color={randomColor(props.children)}\n        round\n        size={25}\n      />\n      <span className=\"name\" style={{ color }}>\n        {props.children}\n      </span>\n    </div>\n  )\n}\n\nfunction InviteBar(props) {\n  const [user, setUser] = useState('')\n\n  let inputRef\n  const inviteUser = () => {\n    props.onInvite(user)\n    setUser('')\n    inputRef.focus()\n  }\n\n  return (\n    <div className=\"invite\">\n      <div className=\"title\">Invite Someone</div>\n      <div className=\"field\">\n        <input\n          className=\"clear-input\"\n          placeholder=\"username\"\n          autoComplete=\"off\"\n          value={user}\n          onChange={(e) => setUser(e.currentTarget.value)}\n          onKeyDown={(e) => (e.key === 'Enter' ? inviteUser() : null)}\n          ref={(input) => (inputRef = input)}\n        />\n        <FiArrowRightCircle className=\"submit\" onClick={inviteUser} />\n      </div>\n    </div>\n  )\n}\n","import fetch from \"./fetch\";\n\nexport function getComments(convo_id) {\n  return fetch(`/comment/${convo_id}`, { method: \"GET\" })\n}\n\nexport function postComment(token, { convo_id, comment }) {\n  return fetch(`/comment/${convo_id}`, { method: \"POST\", headers: { Authorization: token }, body: { comment: comment } });\n}\n\nexport function putVote(id, { token, vote }) {\n  return fetch(`/comment/${id}/vote/${vote}`, { method: \"PUT\", headers: token ? { Authorization: token } : undefined });\n}","import React, { useState } from 'react'\nimport { GoCommentDiscussion, GoOrganization } from 'react-icons/go'\nimport { FiThumbsUp, FiThumbsDown } from 'react-icons/fi'\n\nimport Sidebar from '../components/Sidebar'\nimport ConfiguredQuill from '../components/ConfiguredQuill'\nimport ConfiguredInterweave from '../components/ConfiguredInterweave'\nimport Contributors from '../components/Contributors'\n\nimport useConversation from '../hooks/useConversation'\nimport useComments from '../hooks/useComments'\nimport useAuth from '../hooks/useAuth'\nimport useReload from '../hooks/useReload'\n\nimport * as conversationService from '../services/conversation.service'\nimport * as commentService from '../services/comment.service'\n\nimport { randomColor } from '../_helpers'\n\nimport './styles/Conversation.scss'\n\nfunction Conversation(props) {\n  const id = props.match.params.id\n  const { token, isLoggedIn } = useAuth()\n\n  const [convoReload, reloadConvo] = useReload()\n  const [commentReload, reloadComments] = useReload()\n\n  const convo = useConversation(id, { reload: convoReload, token })\n  const comments = useComments(id, { reload: commentReload, token })\n\n  const [post, setPost] = useState('')\n  const [invited, setInvited] = useState(convo?.contributors || [])\n\n  const inviteContributor = (newUser) => {\n    setInvited([...invited, newUser])\n\n    conversationService\n      .postContributor(newUser, { token, convo_id: id })\n      .then((_) => reloadConvo())\n      .catch((_) => {}) // Handle erroring later\n  }\n\n  const postConvoPost = () => {\n    conversationService\n      .postConversationPost(token, { convo_id: id, post })\n      .then(() => {\n        reloadConvo()\n        setPost('')\n      })\n      .catch((_) => {}) // Handle erroring later\n  }\n\n  function postComment(comment) {\n    return commentService\n      .postComment(token, { convo_id: id, comment })\n      .then(() => reloadComments())\n      .catch((_) => {}) // Handle erroring later\n  }\n\n  /**\n   *\n   * @param {'1' | '0' | '-1'} vote\n   */\n  const updateVote = (vote) => {\n    conversationService\n      .putVote(id, { token, vote })\n      .then(() => reloadConvo())\n      .catch((_) => {}) // Handle erroring later\n  }\n\n  // If conversation doesn't exist redirect to home\n  if (!convo) props.history.push('/home')\n\n  return (\n    <div className=\"conversation\">\n      <Discussion\n        posts={convo?.posts}\n        submit={postConvoPost}\n        body={post}\n        setBody={setPost}\n        isLoggedIn={isLoggedIn}\n        isContributor={convo?.isContributor}\n      />\n      <Title\n        title={convo?.title}\n        views={convo?.views}\n        votes={convo?.votes}\n        userVote={convo?.vote}\n        updateVote={updateVote}\n        isLoggedIn={isLoggedIn}\n        isContributor={convo?.isContributor}\n        navigate={props.history.push}\n        id={id}\n      />\n      <Sidebar>\n        <Comments\n          icon={GoCommentDiscussion}\n          title=\"Comments\"\n          comments={comments || []}\n          postComment={postComment}\n        />\n        <Contributors\n          icon={GoOrganization}\n          title=\"Contributors\"\n          style={{ width: '100px', transition: 'all 0.5s ease-in' }}\n          sections={['active', 'invited']}\n          invited={invited}\n          active={convo?.contributors}\n          onInvite={inviteContributor}\n          noTitle\n        />\n      </Sidebar>\n    </div>\n  )\n}\n\nfunction Title({\n  title,\n  views,\n  votes,\n  userVote,\n  updateVote,\n  isLoggedIn,\n  isContributor,\n  navigate,\n  id,\n}) {\n  const handleVote = (nVote) => {\n    if (nVote === userVote) updateVote(0)\n    else updateVote(nVote)\n  }\n\n  return (\n    <div className=\"d-title\">\n      <TitleVote votes={votes} userVote={userVote} setVote={handleVote} />\n      <div>\n        <div className=\"text\">{title}</div>\n        {(!isLoggedIn || !isContributor) && (\n          <div\n            className=\"join\"\n            onClick={() =>\n              isLoggedIn\n                ? false // Handle contributor request\n                : navigate({\n                    pathname: '/login',\n                    state: {\n                      from: {\n                        pathname: `/conversation/${id}`,\n                      },\n                    },\n                  })\n            }\n          >\n            Join Conversation\n          </div>\n        )}\n      </div>\n      <div className=\"views\">{views} views</div>\n    </div>\n  )\n}\n\nfunction TitleVote({ votes = '0', userVote, setVote }) {\n  return (\n    <div className=\"vote\">\n      <FiThumbsUp\n        className={`thumb ${userVote === 1 ? 'upvoted' : ''}`}\n        onClick={() => setVote(1)}\n      />\n      <span className=\"amount\">{votes}</span>\n      <FiThumbsDown\n        className={`thumb ${userVote === -1 ? 'upvoted' : ''}`}\n        onClick={() => setVote(-1)}\n      />\n    </div>\n  )\n}\n\nfunction Discussion({\n  posts,\n  body,\n  setBody,\n  submit,\n  isLoggedIn,\n  isContributor,\n}) {\n  return (\n    <div className=\"discussion\">\n      <div className=\"inner\">\n        {posts &&\n          posts.map((item, index) => (\n            <DiscussionItem\n              {...item}\n              key={`${item.contributor}/${item.time_of_post}/${index}`}\n            />\n          ))}\n      </div>\n      {isLoggedIn && isContributor && (\n        <div className=\"editor-wrapper\">\n          <ConfiguredQuill value={body} setValue={setBody} />\n          <div className=\"post-button\" onClick={submit}>\n            Submit\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction DiscussionItem({ contributor, post }) {\n  return (\n    <>\n      <div className=\"item\">\n        <span style={{ color: randomColor(contributor) }}>{contributor}: </span>\n        <ConfiguredInterweave content={post} />\n      </div>\n      <div className=\"break\" />\n    </>\n  )\n}\n\nfunction Comments(props) {\n  const [newComment, setNewComment] = useState('')\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  function postComment() {\n    if (isSubmitting) return\n    setIsSubmitting(true)\n\n    props.postComment(newComment).then((_) => {\n      setIsSubmitting(false)\n      setNewComment('')\n    })\n  }\n\n  return (\n    <>\n      <div className=\"comment-section\">\n        {props.comments.map((comment, index) => (\n          <Comment\n            key={`${comment.contributor}/${comment.time_of_comment}/${index}`}\n            {...comment}\n          />\n        ))}\n      </div>\n      <div className=\"add\">\n        <textarea\n          value={newComment}\n          onChange={(e) => setNewComment(e.currentTarget.value)}\n        />\n        <button type=\"submit\" onClick={postComment}>\n          {!isSubmitting ? 'Submit' : 'Posting'}\n        </button>\n      </div>\n    </>\n  )\n}\n\nfunction Comment({ age, username, comment, votes }) {\n  const [upvoted, setUpvoted] = useState(false)\n\n  return (\n    <div className=\"comment\">\n      <div className=\"meta\">\n        <div className=\"contributor\" style={{ color: randomColor(username) }}>\n          {username}\n        </div>\n        <div\n          className={`likes ${upvoted ? 'upvoted' : ''}`}\n          onClick={() => setUpvoted(!upvoted)}\n        >\n          {upvoted ? votes + 1 : votes}{' '}\n          <FiThumbsUp style={{ fontSize: '12px' }} />\n        </div>\n        <div className=\"time\">{age}</div>{' '}\n      </div>\n      <div className=\"body\">{comment}</div>\n    </div>\n  )\n}\n\nexport default Conversation\n","import { useState, useEffect } from 'react'\n\nimport useAuth from './useAuth'\n\nimport * as conversationService from '../services/conversation.service'\n\nexport default function useConversation(id, { reload, token } = {}) {\n  const [conversation, setConvo] = useState({})\n  const { didPersistLoad } = useAuth()\n\n  useEffect(() => {\n    if (!didPersistLoad) return\n\n    conversationService\n      .getConversation(id, { token })\n      .then((u) => setConvo(u))\n      .catch((_) => setConvo(null))\n  }, [id, reload, token, didPersistLoad])\n\n  return conversation\n}\n","import { useState, useEffect } from 'react'\n\nimport useAuth from './useAuth'\n\nimport * as commentService from '../services/comment.service'\n\nexport default function useComments(id, { reload, token } = {}) {\n  const [comments, setComments] = useState([])\n  const { didPersistLoad } = useAuth()\n\n  useEffect(() => {\n    if (!didPersistLoad) return\n\n    commentService\n      .getComments(id)\n      .then((u) => setComments(u.comments))\n      .catch((_) => {})\n  }, [id, reload, token, didPersistLoad])\n\n  return comments\n}\n","import React, { useState } from 'react'\nimport { Spinner } from 'reactstrap'\n\nimport ConfiguredQuill from '../components/ConfiguredQuill'\nimport Contributors from '../components/Contributors'\n\nimport * as conversationService from '../services/conversation.service'\n\nimport useAuth from '../hooks/useAuth'\n\nimport './styles/Post.scss'\nimport 'react-quill/dist/quill.snow.css'\n\nexport default function Post(props) {\n  const { token } = useAuth()\n\n  const [title, setTitle] = useState('')\n  const [body, setBody] = useState('')\n\n  const [invited, setInvited] = useState([])\n  const addInvited = (newUser) => setInvited([...invited, newUser])\n\n  const [submitting, setSubmitting] = useState(false)\n\n  function uploadPost() {\n    setSubmitting(true)\n\n    conversationService\n      .postConversation(token, { title, body })\n      .then(({ convo_id }) => {\n        return conversationService\n          .postContributor(invited, { convo_id, token })\n          .then((_) => convo_id)\n          .catch((_) => Promise.reject())\n      })\n      .then((convo_id) => {\n        setSubmitting(false)\n\n        props.history.push(`/conversation/${convo_id}`)\n      })\n      .catch((convo_id) => {\n        setSubmitting(false)\n\n        props.history.push(`/conversation/${convo_id}`)\n      })\n  }\n\n  return (\n    <div className=\"post\">\n      <Editor title={title} setTitle={setTitle} body={body} setBody={setBody} />\n      <div className=\"\">\n        <Contributors\n          sections={['invited']}\n          onInvite={addInvited}\n          invited={invited}\n        >\n          <div className=\"post-button\" onClick={uploadPost}>\n            {!submitting ? (\n              <div className=\"text\">Post</div>\n            ) : (\n              <Spinner\n                css={`\n                  width: 50px;\n                  height: 50px;\n                  flex: 1;\n                `}\n              />\n            )}\n          </div>\n        </Contributors>\n      </div>\n    </div>\n  )\n}\n\nfunction Editor(props) {\n  const { title, setTitle, body, setBody } = props\n\n  return (\n    <div className=\"editor\">\n      <input\n        className=\"post-title\"\n        placeholder=\"Title\"\n        value={title}\n        onChange={(e) => setTitle(e.currentTarget.value)}\n      />\n      <ConfiguredQuill value={body} onChange={(val) => setBody(val)} />\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom'\n\nimport Header from './components/Header'\nimport Navigation from './components/Navigation'\nimport Persist from './components/Persist'\n\nimport Home from './pages/Home'\nimport About from './pages/About'\nimport Login from './pages/Login'\nimport Register from './pages/Register'\nimport Account from './pages/Account'\nimport Profile from './pages/Profile'\nimport Conversation from './pages/Conversation'\nimport Post from './pages/Post'\n\nimport './App.scss'\n\n/**\n * @type {React.Context<{ isLoggedIn: boolean, setIsLoggedIn: (val: boolean)=> void, token: string, didPersistLoad: boolean setToken: (val: string) => void }>}\n */\nconst AuthContext = React.createContext()\n\nfunction App() {\n  const [didPersistLoad, setPersistLoad] = useState(false)\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  const [token, setToken] = useState(null)\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isLoggedIn,\n        setIsLoggedIn,\n        token,\n        setToken,\n        didPersistLoad,\n      }}\n    >\n      <Persist\n        data={{ token, isLoggedIn }}\n        debounce={500}\n        onMount={(data) => {\n          setIsLoggedIn(data.isLoggedIn)\n          setToken(data.token)\n        }}\n        onComplete={() => setPersistLoad(true)}\n      />\n      <Router>\n        <div>\n          <Header />\n          <div className=\"nav\">\n            <Navigation />\n          </div>\n          <div className=\"content\">\n            <Switch>\n              <Redirect exact from=\"/\" to=\"/home\" />\n              <Route exact path=\"/home\" component={Home} />\n              <Route exact path=\"/about\" component={About} />\n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/register\" component={Register} />\n              <Route exact path=\"/conversation/:id\" component={Conversation} />\n              <Route exact path=\"/profile/:id\" component={Profile} />\n              <SecuredRoute\n                exact\n                path=\"/account\"\n                component={Account}\n                authenticated={isLoggedIn}\n              />\n              <SecuredRoute\n                exact\n                path=\"/post\"\n                component={Post}\n                authenticated={isLoggedIn}\n              />\n            </Switch>\n          </div>\n        </div>\n      </Router>\n    </AuthContext.Provider>\n  )\n}\n\nfunction SecuredRoute({ component: Component, authenticated, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        authenticated === true ? (\n          <Component {...props} {...rest} />\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: { from: props.location },\n            }}\n          />\n        )\n      }\n    />\n  )\n}\n\nexport default App\nexport { AuthContext }\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}