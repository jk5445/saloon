(window["webpackJsonpsaloon-client"]=window["webpackJsonpsaloon-client"]||[]).push([[0],{216:function(e,t,a){e.exports=a(418)},222:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},265:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},417:function(e,t,a){},418:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(129),o=a.n(r),i=a(33),s=a(5),l=a(15),m=a(35),u=a(92),d=a(420),v=a(421),E=a(424),p=a(425),f=a(91),b=a(197),h=a.n(b);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e,t){var a=t.headers,n=t.body,c=Object(i.a)(t,["headers","body"]),r=h.a.join("https://agile-tor-73556.herokuapp.com/api/v1",e);return fetch(r,O({headers:O({"Content-Type":"application/json"},a)},c,{body:JSON.stringify(n)})).then((function(e){if(e.ok)return e.json();throw e}))}function j(){var e=Object(n.useContext)(ge),t=e.token,a=e.setToken,c=e.isLoggedIn,r=e.setIsLoggedIn,o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return Object(n.useEffect)((function(){if(t&&c){(function(e){return N("/user",{headers:{Authorization:e}})})(t).then((function(e){return m(e)})).catch((function(e){return a(null),r(!1),void m(null)}))}}),[t,a,c,r]),l}a(222);function y(e){return c.a.createElement("div",{className:"search-wrapper"},c.a.createElement("input",{placeholder:"Search..."}),c.a.createElement("div",null,c.a.createElement("div",{className:"body"},c.a.createElement(u.b,{size:20,className:"icon",color:"white"}))))}function w(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],o=a[1],l=Object(n.useContext)(ge),m=l.setIsLoggedIn,u=l.setToken,f=function(t){var a=t.to,n=Object(i.a)(t,["to"]);return c.a.createElement(d.a,Object.assign({onClick:function(){return e.redirect(a)}},n))};return c.a.createElement(v.a,{isOpen:r,toggle:function(){return o(!r)},nav:!0},c.a.createElement(E.a,{caret:!0,className:"login-account"},"Hey, ",e.name),c.a.createElement(p.a,{right:!0},c.a.createElement(f,{to:"/user"},"Profile"),c.a.createElement(f,{to:"/saved-conversations"},"Saved Conversations"),c.a.createElement(f,{to:"/history"},"History"),c.a.createElement(d.a,{divider:!0}),c.a.createElement(f,{to:"/settings"},"Settings"),c.a.createElement(d.a,{divider:!0}),c.a.createElement(d.a,{onClick:function(){u(null),m(!1),e.redirect("/")}},"Log Out")))}var k=Object(m.g)((function(e){var t=Object(n.useContext)(ge).isLoggedIn,a=j();return c.a.createElement("div",{className:"header"},c.a.createElement(l.b,{to:"/",className:"saloon"},"Saloon"),c.a.createElement(y,null),t&&c.a.createElement(l.b,{to:"/post",className:"login-account"},"Post"),t?c.a.createElement(w,{name:a?a.first_name:void 0,redirect:e.history.push}):c.a.createElement(l.b,{to:"/login",className:"login-account"},"Login"))}));a(228);var S=Object(m.g)((function(e){return c.a.createElement(l.b,{to:e.to,className:[e.location.pathname.includes(e.to)?"selected":"","nav-item"].join(" ")},e.children)})),C=function(){return c.a.createElement("div",{className:"navigation"},c.a.createElement("div",{className:"links"},c.a.createElement(S,{to:"/home"},"Home")))},I=a(200),x=a(201),_=a(213),L=a(202),P=a(214),T=a(203),z=a.n(T),D=a(204),J=a.n(D),A=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(_.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(c)))).persist=z()((function(e){window.localStorage.setItem(a.props.name,JSON.stringify(e))}),a.props.debounce),a}return Object(P.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.data;J()(t,this.props.data)||this.persist(this.props.data)}},{key:"componentDidMount",value:function(){var e=window.localStorage.getItem(this.props.name);e&&null!==e&&this.props.onMount(JSON.parse(e))}},{key:"render",value:function(){return null}}]),t}(c.a.Component);A.defaultProps={debounce:300};var V=a(66),B=a(131),F=a(423);function q(e){return c.a.createElement(B.a,Object.assign({matchers:[new F.a("url")]},e))}a(229);function H(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"item",onClick:function(){return e.navigate("/conversation/".concat(e.convo_id))}},c.a.createElement("div",{className:"title"},e.title),c.a.createElement("div",{className:"inner"},c.a.createElement(W,e),c.a.createElement("div",{className:"body"},c.a.createElement(q,{content:e.description})))),c.a.createElement("div",{className:"break"}))}function W(e){return c.a.createElement("div",{className:"meta"},c.a.createElement(M,{people:e.contributors,description:e.contributors}),c.a.createElement("div",{className:"creator"},e.creator),c.a.createElement("div",{className:"convo-data"},c.a.createElement("div",{className:"left"},c.a.createElement("div",null,"edited ",e.age),c.a.createElement("div",null,"viewed ",e.views," times")),c.a.createElement("div",{className:"right"},c.a.createElement("div",null,e.votes," votes"),c.a.createElement("div",null,e.comments," comments"))))}function M(e){return c.a.createElement("div",{className:"discussed-by"},c.a.createElement(V.a,{name:e.people[0],round:!0,size:42}),e.people.reduce((function(e,t){return t?e+1:e}),0)>1&&c.a.createElement(V.a,{name:e.people[1],round:!0,size:42}),c.a.createElement("span",{className:"text"},c.a.createElement("div",null,"Discussion by ",e.description)))}var U=Object(m.g)((function(e){var t=e.items,a=[];return c.a.createElement("div",{className:"feed"},(t||[]).map((function(t){return!a.includes(t.convo_id)&&(a.push(t.convo_id),c.a.createElement(H,Object.assign({},t,{key:"Feed/".concat(t.convo_id),navigate:function(t){return e.history.push(t)},description:t.post})))})))}));function G(){var e=Object(n.useContext)(ge),t=e.token,a=e.setToken,c=e.isLoggedIn,r=e.setIsLoggedIn,o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return Object(n.useEffect)((function(){if(!l){(function(e){return N("/feed",{method:"GET",headers:e?{Authorization:e}:void 0})})(t).then((function(e){return m(e.convos)})).catch((function(e){return a(null),r(!1),void m(null)}))}}),[t,l,a,c,r]),l}var K=function(){var e=G();return c.a.createElement("div",{className:"home"},c.a.createElement(U,{items:e}))},R=a(64);a(265);function $(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"field-title"},e.placeholder),c.a.createElement(R.b,e),c.a.createElement(R.a,{name:e.name,render:function(e){return c.a.createElement("div",{className:"error"},e.replace("_"," "))}}))}var Q=function(e){var t=Object(n.useContext)(ge),a=t.isLoggedIn,r=t.setIsLoggedIn,o=t.setToken;return a?c.a.createElement(m.a,{to:e.location.state?e.location.state.from.pathname:"/"}):c.a.createElement("div",{className:"form"},c.a.createElement("h1",null,"Login"),c.a.createElement(R.d,{initialValues:{email:"",password:""},onSubmit:function(e,t){(function(e,t){return N("/user/login",{method:"POST",body:{email:e,password:t}})})(e.email,e.password).then((function(e){o(e.token),r(!0)})).catch((function(e){t.setErrors({password:"incorrect password"}),t.setSubmitting(!1)}))}},(function(e){var t=e.isSubmitting;return c.a.createElement(R.c,null,c.a.createElement($,{type:"text",name:"email",placeholder:"email"}),c.a.createElement($,{type:"password",name:"password",placeholder:"password"}),c.a.createElement("button",{type:"submit",disabled:t},"Submit"),c.a.createElement("div",{className:"switch-here"},"Don't have an account? Join ",c.a.createElement(l.b,{to:"/register"},"here")))})))},X=a(55);var Y=function(){var e=Object(n.useContext)(ge),t=e.setToken,a=e.setIsLoggedIn;return e.isLoggedIn?c.a.createElement(m.a,{to:"/home"}):c.a.createElement("div",{className:"form"},c.a.createElement("h1",null,"Register"),c.a.createElement(R.d,{initialValues:{username:"",password:"",first_name:"",last_name:"",email:""},onSubmit:function(e,n){(function(e){var t=e.username,a=e.password;return N("/user/signup",{method:"POST",body:{username:t,first_name:e.first_name,last_name:e.last_name,password:a,email:e.email}})})(e).then((function(e){t(e.token),a(!0)})).catch((function(e){return n.setFieldError("email","something went wrong")}))},validationSchema:X.object().shape({first_name:X.string().required(),last_name:X.string().required(),username:X.string().required(),password:X.string().required()})},(function(e){var t=e.isSubmitting;return c.a.createElement(R.c,null,c.a.createElement($,{type:"email",name:"email",placeholder:"email"}),c.a.createElement($,{type:"text",name:"first_name",placeholder:"first name"}),c.a.createElement($,{type:"text",name:"last_name",placeholder:"last name"}),c.a.createElement($,{type:"text",name:"username",placeholder:"username"}),c.a.createElement($,{type:"password",name:"password",placeholder:"password"}),c.a.createElement("button",{type:"submit",disabled:t},"Submit"),c.a.createElement("div",{className:"switch-here"},"Already have an account? Login ",c.a.createElement(l.b,{to:"/login"},"here")))})))},Z=a(54),ee=a(211),te=a.n(ee);function ae(e){var t=e.value,a=e.setValue,n=Object(i.a)(e,["value","setValue"]);return c.a.createElement(te.a,Object.assign({theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link"]]},formats:["bold","italic","underline","strike","link"],value:t||"",onChange:function(e){return a(e)}},n))}function ne(e,t){var a=Object(n.useState)({}),c=Object(s.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){(function(e){return N("/convo/".concat(e),{method:"GET"})})(e).then((function(e){return o(e)})).catch((function(e){}))}),[e,t]),r}var ce=a(212);function re(e){return ce({seed:e,luminosity:"dark"})}a(414);function oe(e){var t=e.title,a=e.views,r=e.likes,o=e.isLoggedIn,i=e.isContributor,l=e.navigate,m=e.id,u=Object(n.useState)("NONE"),d=Object(s.a)(u,2),v=d[0],E=d[1];return c.a.createElement("div",{className:"d-title"},c.a.createElement(ie,{likes:r,vote:v,setVote:function(e){E(e===v?"NONE":e)}}),c.a.createElement("div",null,c.a.createElement("div",{className:"text"},t),(!o||!i)&&c.a.createElement("div",{className:"join",onClick:function(){return!i&&l({pathname:"/login",state:{from:{pathname:"/conversation/".concat(m)}}})}},"Join Conversation")),c.a.createElement("div",{className:"views"},a," views"))}function ie(e){var t=e.likes,a=void 0===t?"0":t,n=e.vote,r=e.setVote;return c.a.createElement("div",{className:"vote"},c.a.createElement(Z.c,{className:"thumb ".concat("UP"===n?"upvoted":""),onClick:function(){return r("UP")}}),c.a.createElement("span",{className:"amount"},a),c.a.createElement(Z.b,{className:"thumb ".concat("DOWN"===n?"upvoted":""),onClick:function(){return r("DOWN")}}))}function se(e){var t=e.posts,a=e.body,n=e.setBody,r=e.submit,o=e.isLoggedIn;return c.a.createElement("div",{className:"discussion"},c.a.createElement("div",{className:"inner"},t&&t.map((function(e,t){return c.a.createElement(le,Object.assign({},e,{key:"".concat(e.contributor,"/").concat(e.time_of_post,"/").concat(t)}))}))),o&&c.a.createElement("div",{className:"editor-wrapper"},c.a.createElement(ae,{value:a,setValue:n}),c.a.createElement("div",{className:"post-button",onClick:r},"Submit")))}function le(e){var t=e.contributor,a=e.post;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"item"},c.a.createElement("span",{style:{color:re(t)}},t,": "),c.a.createElement(q,{content:a})),c.a.createElement("div",{className:"break"}))}function me(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),r=a[0],o=a[1];return c.a.createElement("div",{className:"comments ".concat(r?"":"minimized")},c.a.createElement("div",{className:"comment-header"},c.a.createElement("div",{className:"button ".concat(r?"rotate":""),onClick:function(){return o(!r)}},c.a.createElement(u.a,null)),c.a.createElement("div",{className:"title ".concat(r?"":"fade")},"Comments")),e.comments.map((function(e,t){return c.a.createElement(ue,Object.assign({key:"".concat(e.contributor,"/").concat(e.time_of_comment,"/").concat(t),_showing:r},e))})),c.a.createElement("div",{className:"add ".concat(r?"":"fade")},c.a.createElement("textarea",null),c.a.createElement("button",{type:"submit"},"Submit")))}function ue(e){var t=e.time_of_comment,a=e.contributor,r=e.body,o=e._showing,i=e.likes,l=Object(n.useState)(!1),m=Object(s.a)(l,2),u=m[0],d=m[1];return c.a.createElement("div",{className:"comment ".concat(o?"":"fade")},c.a.createElement("div",{className:"meta"},c.a.createElement("div",{className:"contributor",style:{color:re(a)}},a),c.a.createElement("div",{className:"likes ".concat(u?"upvoted":""),onClick:function(){return d(!u)}},u?i+1:i," ",c.a.createElement(Z.c,{style:{fontSize:"12px"}})),c.a.createElement("div",{className:"time"},t)),c.a.createElement("div",{className:"body"},r))}var de=function(e){var t=e.match.params.id,a=Object(n.useState)(1),r=Object(s.a)(a,2),o=r[0],i=r[1],l=Object(n.useContext)(ge),m=l.token,u=l.isLoggedIn,d=Object(n.useState)(""),v=Object(s.a)(d,2),E=v[0],p=v[1],f=ne(t,o);return c.a.createElement("div",{className:"conversation"},c.a.createElement(se,{posts:f.posts,submit:function(){(function(e,t){return N("/post",{method:"POST",headers:{Authorization:e},body:{convo_id:t.convo_id,post:t.post}})})(m,{convo_id:t,post:E}).then((function(){i(-o),p("")})).catch((function(e){}))},body:E,setBody:p,isLoggedIn:u}),c.a.createElement(oe,{title:f.title,views:f.views,likes:f.votes,isLoggedIn:u,isContributor:f.isContributor,navigate:e.history.push,id:t}),c.a.createElement(me,{comments:f.comments||[]}))},ve=a(422);a(415),a(416);function Ee(e){var t=function(){var e=Object(n.useContext)(ge);return[e.token,e.setToken]}(),a=Object(s.a)(t,1)[0],r=Object(n.useState)(""),o=Object(s.a)(r,2),i=o[0],l=o[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],v=u[1],E=Object(n.useState)(!1),p=Object(s.a)(E,2),f=p[0],b=p[1];return c.a.createElement("div",{className:"post"},c.a.createElement(pe,{title:i,setTitle:l,body:d,setBody:v}),c.a.createElement("div",{className:"collaborators"},c.a.createElement("div",null,"Collaborators"),c.a.createElement(fe,{color:"gray"},"Invited"),c.a.createElement(he,null),c.a.createElement("div",{className:"post-button",onClick:function(){b(!0),function(e,t){return N("/convo",{method:"POST",headers:{Authorization:e},body:{title:t.title,post:t.body}})}(a,{title:i,body:d}).then((function(t){b(!1),e.history.push("/conversation/".concat(t.convo_id))})).catch((function(e){b(!1)}))}},f?c.a.createElement(ve.a,{css:"\n                width: 50px;\n                height: 50px;\n                flex: 1;\n              "}):c.a.createElement("div",{className:"text"},"Post"))))}function pe(e){var t=e.title,a=e.setTitle,n=e.body,r=e.setBody;return c.a.createElement("div",{className:"editor"},c.a.createElement("input",{className:"post-title",placeholder:"Title",value:t,onChange:function(e){return a(e.currentTarget.value)}}),c.a.createElement(ae,{value:n,onChange:function(e){return r(e)}}))}function fe(e){var t=e.color,a=e.children;return c.a.createElement("div",{className:"section"},c.a.createElement("div",{className:"title"},a),c.a.createElement("div",{className:"users"},c.a.createElement(be,{color:t},"Jack Hedaya"),c.a.createElement(be,{color:t},"Abe Kassin"),c.a.createElement(be,{color:t},"Judah Kishk")))}function be(e){var t=e.color,a=void 0===t?void 0:t;return c.a.createElement("div",{className:"user"},c.a.createElement(V.a,{name:e.children,src:e.image||null,round:!0,size:25}),c.a.createElement("span",{className:"name",style:{color:a}},e.children))}function he(e){return c.a.createElement("div",{className:"invite"},c.a.createElement("div",{className:"title"},"Invite Someone"),c.a.createElement("div",{className:"field"},c.a.createElement("input",{className:"clear-input",placeholder:"username",autoComplete:"off"}),c.a.createElement(Z.a,{className:"submit"})))}a(417);var ge=c.a.createContext();function Oe(e){var t=e.component,a=e.authenticated,n=Object(i.a)(e,["component","authenticated"]);return c.a.createElement(m.b,Object.assign({},n,{render:function(e){return!0===a?c.a.createElement(t,Object.assign({},e,n)):c.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var Ne=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],d=i[1];return c.a.createElement(ge.Provider,{value:{isLoggedIn:a,setIsLoggedIn:r,token:u,setToken:d}},c.a.createElement(A,{data:{token:u,isLoggedIn:a},debounce:500,onMount:function(e){r(e.isLoggedIn),d(e.token)}}),c.a.createElement(l.a,null,c.a.createElement("div",null,c.a.createElement(k,null),c.a.createElement(C,null),c.a.createElement("div",{className:"content"},c.a.createElement(m.d,null,c.a.createElement(m.a,{exact:!0,from:"/",to:"/home"}),c.a.createElement(m.b,{exact:!0,path:"/home",component:K}),c.a.createElement(m.b,{exact:!0,path:"/login",component:Q}),c.a.createElement(m.b,{exact:!0,path:"/register",component:Y}),c.a.createElement(m.b,{exact:!0,path:"/conversation/:id",component:de}),c.a.createElement(Oe,{exact:!0,path:"/post",component:Ee,authenticated:a}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[216,1,2]]]);
//# sourceMappingURL=main.014992a3.chunk.js.map