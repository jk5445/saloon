(window["webpackJsonpsaloon-client"]=window["webpackJsonpsaloon-client"]||[]).push([[0],{216:function(e,t,a){e.exports=a(418)},222:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},265:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},417:function(e,t,a){},418:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(129),o=a.n(r),i=a(33),l=a(6),s=a(15),m=a(35),u=a(92),d=a(420),v=a(421),E=a(424),p=a(425),f=a(91),b=a(197),h=a.n(b);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(){return!1};function y(e,t){var a=t.headers,n=t.body,c=Object(i.a)(t,["headers","body"]),r=h.a.join(O()?"https://agile-tor-73556.herokuapp.com/api/v1":"/api/v1",e);return fetch(r,N({headers:N({"Content-Type":"application/json"},a)},c,{body:JSON.stringify(n)})).then((function(e){if(e.ok)return e.json();throw e}))}function j(){return Object(n.useContext)(Oe)}function w(){var e=j(),t=e.token,a=e.setToken,c=e.isLoggedIn,r=e.setIsLoggedIn,o=Object(n.useState)(null),i=Object(l.a)(o,2),s=i[0],m=i[1];return Object(n.useEffect)((function(){if(t&&c){(function(e){return y("/user",{headers:{Authorization:e}})})(t).then((function(e){return m(e)})).catch((function(e){return a(null),r(!1),void m(null)}))}}),[t,a,c,r]),s}a(222);function k(e){return c.a.createElement("div",{className:"search-wrapper"},c.a.createElement("input",{placeholder:"Search..."}),c.a.createElement("div",null,c.a.createElement("div",{className:"body"},c.a.createElement(u.b,{size:20,className:"icon",color:"white"}))))}function S(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],o=a[1],s=j(),m=s.setIsLoggedIn,u=s.setToken,f=function(t){var a=t.to,n=Object(i.a)(t,["to"]);return c.a.createElement(d.a,Object.assign({onClick:function(){return e.redirect(a)}},n))};return c.a.createElement(v.a,{isOpen:r,toggle:function(){return o(!r)},nav:!0},c.a.createElement(E.a,{caret:!0,className:"login-account"},"Hey, ",e.name),c.a.createElement(p.a,{right:!0},c.a.createElement(f,{to:"/user"},"Profile"),c.a.createElement(f,{to:"/saved-conversations"},"Saved Conversations"),c.a.createElement(f,{to:"/history"},"History"),c.a.createElement(d.a,{divider:!0}),c.a.createElement(f,{to:"/settings"},"Settings"),c.a.createElement(d.a,{divider:!0}),c.a.createElement(d.a,{onClick:function(){u(null),m(!1),e.redirect("/")}},"Log Out")))}var I=Object(m.g)((function(e){var t=j().isLoggedIn,a=w();return c.a.createElement("div",{className:"header"},c.a.createElement(s.b,{to:"/",className:"saloon"},"Saloon"),c.a.createElement(k,null),t&&c.a.createElement(s.b,{to:"/post",className:"login-account"},"Post"),t?c.a.createElement(S,{name:a?a.first_name:void 0,redirect:e.history.push}):c.a.createElement(s.b,{to:"/login",className:"login-account"},"Login"))}));a(228);var C=Object(m.g)((function(e){return c.a.createElement(s.b,{to:e.to,className:[e.location.pathname.includes(e.to)?"selected":"","nav-item"].join(" ")},e.children)})),_=function(){return c.a.createElement("div",{className:"navigation"},c.a.createElement("div",{className:"links"},c.a.createElement(C,{to:"/home"},"Home")))},L=a(200),x=a(201),P=a(213),T=a(202),z=a(214),D=a(203),J=a.n(D),A=a(204),V=a.n(A),B=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(P.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(c)))).persist=J()((function(e){window.localStorage.setItem(a.props.name,JSON.stringify(e))}),a.props.debounce),a}return Object(z.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.data;V()(t,this.props.data)||this.persist(this.props.data)}},{key:"componentDidMount",value:function(){var e=window.localStorage.getItem(this.props.name);e&&null!==e&&this.props.onMount(JSON.parse(e))}},{key:"render",value:function(){return null}}]),t}(c.a.Component);B.defaultProps={debounce:300};var F=a(66),q=a(131),H=a(423);function W(e){return c.a.createElement(q.a,Object.assign({matchers:[new H.a("url")]},e))}var M=a(206);function U(e){return M({seed:e})}a(229);function G(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"item",onClick:function(){return e.navigate("/conversation/".concat(e.convo_id))}},c.a.createElement("div",{className:"title"},e.title),c.a.createElement("div",{className:"inner"},c.a.createElement(K,e),c.a.createElement("div",{className:"body"},c.a.createElement(W,{content:e.description})))),c.a.createElement("div",{className:"break"}))}function K(e){var t;return c.a.createElement("div",{className:"meta"},c.a.createElement(R,{people:e.contributors,description:(t=e.contributors,1===t.length?t[0]:2===t.length?"".concat(t[0]," and ").concat(t[1]):3===t.length?"".concat(t[0],", ").concat(t[1]," and ").concat(t[2]):4===t.length?"".concat(t[0],", ").concat(t[1],", ").concat(t[2]," and ").concat(t[3]):void 0)}),c.a.createElement("div",{className:"creator"},e.creator),c.a.createElement("div",{className:"convo-data"},c.a.createElement("div",{className:"left"},c.a.createElement("div",null,"edited ",e.age),c.a.createElement("div",null,"viewed ",e.views," times")),c.a.createElement("div",{className:"right"},c.a.createElement("div",null,e.votes," votes"),c.a.createElement("div",null,e.comments," comments"))))}function R(e){return c.a.createElement("div",{className:"discussed-by"},c.a.createElement(F.a,{name:e.people[0],color:U(e.people[0]),round:!0,size:42}),e.people.length>1&&c.a.createElement(F.a,{name:e.people[1],color:U(e.people[1]),round:!0,size:42}),c.a.createElement("span",{className:"text"},c.a.createElement("div",null,"Discussion by ",e.description)))}var $=Object(m.g)((function(e){var t=e.items,a=[];return c.a.createElement("div",{className:"feed"},(t||[]).map((function(t){return!a.includes(t.convo_id)&&(a.push(t.convo_id),c.a.createElement(G,Object.assign({},t,{key:"Feed/".concat(t.convo_id),navigate:function(t){return e.history.push(t)},description:t.post})))})))}));function Q(){var e=j(),t=e.token,a=e.setToken,c=e.isLoggedIn,r=e.setIsLoggedIn,o=Object(n.useState)(null),i=Object(l.a)(o,2),s=i[0],m=i[1];return Object(n.useEffect)((function(){if(!s){(function(e){return y("/feed",{method:"GET",headers:e?{Authorization:e}:void 0})})(t).then((function(e){return m(e.convos)})).catch((function(e){return a(null),r(!1),void m(null)}))}}),[t,s,a,c,r]),s}var X=function(){var e=Q();return c.a.createElement("div",{className:"home"},c.a.createElement($,{items:e}))},Y=a(64);a(265);function Z(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"field-title"},e.placeholder),c.a.createElement(Y.b,e),c.a.createElement(Y.a,{name:e.name,render:function(e){return c.a.createElement("div",{className:"error"},e.replace("_"," "))}}))}var ee=function(e){var t=j.isLoggedIn,a=j.setIsLoggedIn,n=j.setToken;return t?c.a.createElement(m.a,{to:e.location.state?e.location.state.from.pathname:"/"}):c.a.createElement("div",{className:"form"},c.a.createElement("h1",null,"Login"),c.a.createElement(Y.d,{initialValues:{email:"",password:""},onSubmit:function(e,t){(function(e,t){return y("/user/login",{method:"POST",body:{email:e,password:t}})})(e.email,e.password).then((function(e){n(e.token),a(!0)})).catch((function(e){t.setErrors({password:"incorrect password"}),t.setSubmitting(!1)}))}},(function(e){var t=e.isSubmitting;return c.a.createElement(Y.c,null,c.a.createElement(Z,{type:"text",name:"email",placeholder:"email"}),c.a.createElement(Z,{type:"password",name:"password",placeholder:"password"}),c.a.createElement("button",{type:"submit",disabled:t},"Submit"),c.a.createElement("div",{className:"switch-here"},"Don't have an account? Join ",c.a.createElement(s.b,{to:"/register"},"here")))})))},te=a(55);var ae=function(){var e=j(),t=e.setToken,a=e.setIsLoggedIn;return e.isLoggedIn?c.a.createElement(m.a,{to:"/home"}):c.a.createElement("div",{className:"form"},c.a.createElement("h1",null,"Register"),c.a.createElement(Y.d,{initialValues:{username:"",password:"",first_name:"",last_name:"",email:""},onSubmit:function(e,n){(function(e){var t=e.username,a=e.password;return y("/user/signup",{method:"POST",body:{username:t,first_name:e.first_name,last_name:e.last_name,password:a,email:e.email}})})(e).then((function(e){t(e.token),a(!0)})).catch((function(e){return n.setFieldError("email","something went wrong")}))},validationSchema:te.object().shape({first_name:te.string().required(),last_name:te.string().required(),username:te.string().required(),password:te.string().required()})},(function(e){var t=e.isSubmitting;return c.a.createElement(Y.c,null,c.a.createElement(Z,{type:"email",name:"email",placeholder:"email"}),c.a.createElement(Z,{type:"text",name:"first_name",placeholder:"first name"}),c.a.createElement(Z,{type:"text",name:"last_name",placeholder:"last name"}),c.a.createElement(Z,{type:"text",name:"username",placeholder:"username"}),c.a.createElement(Z,{type:"password",name:"password",placeholder:"password"}),c.a.createElement("button",{type:"submit",disabled:t},"Submit"),c.a.createElement("div",{className:"switch-here"},"Already have an account? Login ",c.a.createElement(s.b,{to:"/login"},"here")))})))},ne=a(54),ce=a(212),re=a.n(ce);function oe(e){var t=e.value,a=e.setValue,n=Object(i.a)(e,["value","setValue"]);return c.a.createElement(re.a,Object.assign({theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link"]]},formats:["bold","italic","underline","strike","link"],value:t||"",onChange:function(e){return a(e)}},n))}function ie(e,t){var a=t.reload,c=t.token,r=Object(n.useState)({}),o=Object(l.a)(r,2),i=o[0],s=o[1];return Object(n.useEffect)((function(){(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).token;return y("/convo/".concat(e),{method:"GET",headers:t?{Authorization:t}:void 0})})(e,{token:c}).then((function(e){return s(e)})).catch((function(e){}))}),[e,a,c]),i}a(414);function le(e){var t=e.title,a=e.views,r=e.likes,o=e.isLoggedIn,i=e.isContributor,s=e.navigate,m=e.id,u=Object(n.useState)("NONE"),d=Object(l.a)(u,2),v=d[0],E=d[1];return c.a.createElement("div",{className:"d-title"},c.a.createElement(se,{likes:r,vote:v,setVote:function(e){E(e===v?"NONE":e)}}),c.a.createElement("div",null,c.a.createElement("div",{className:"text"},t),(!o||!i)&&c.a.createElement("div",{className:"join",onClick:function(){return!i&&s({pathname:"/login",state:{from:{pathname:"/conversation/".concat(m)}}})}},"Join Conversation")),c.a.createElement("div",{className:"views"},a," views"))}function se(e){var t=e.likes,a=void 0===t?"0":t,n=e.vote,r=e.setVote;return c.a.createElement("div",{className:"vote"},c.a.createElement(ne.c,{className:"thumb ".concat("UP"===n?"upvoted":""),onClick:function(){return r("UP")}}),c.a.createElement("span",{className:"amount"},a),c.a.createElement(ne.b,{className:"thumb ".concat("DOWN"===n?"upvoted":""),onClick:function(){return r("DOWN")}}))}function me(e){var t=e.posts,a=e.body,n=e.setBody,r=e.submit,o=e.isLoggedIn,i=e.isContributor;return c.a.createElement("div",{className:"discussion"},c.a.createElement("div",{className:"inner"},t&&t.map((function(e,t){return c.a.createElement(ue,Object.assign({},e,{key:"".concat(e.contributor,"/").concat(e.time_of_post,"/").concat(t)}))}))),o&&i&&c.a.createElement("div",{className:"editor-wrapper"},c.a.createElement(oe,{value:a,setValue:n}),c.a.createElement("div",{className:"post-button",onClick:r},"Submit")))}function ue(e){var t=e.contributor,a=e.post;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"item"},c.a.createElement("span",{style:{color:U(t)}},t,": "),c.a.createElement(W,{content:a})),c.a.createElement("div",{className:"break"}))}function de(e){var t=Object(n.useState)(!0),a=Object(l.a)(t,2),r=a[0],o=a[1];return c.a.createElement("div",{className:"comments ".concat(r?"":"minimized")},c.a.createElement("div",{className:"comment-header"},c.a.createElement("div",{className:"button ".concat(r?"rotate":""),onClick:function(){return o(!r)}},c.a.createElement(u.a,null)),c.a.createElement("div",{className:"title ".concat(r?"":"fade")},"Comments")),e.comments.map((function(e,t){return c.a.createElement(ve,Object.assign({key:"".concat(e.contributor,"/").concat(e.time_of_comment,"/").concat(t),_showing:r},e))})),c.a.createElement("div",{className:"add ".concat(r?"":"fade")},c.a.createElement("textarea",null),c.a.createElement("button",{type:"submit"},"Submit")))}function ve(e){var t=e.time_of_comment,a=e.contributor,r=e.body,o=e._showing,i=e.likes,s=Object(n.useState)(!1),m=Object(l.a)(s,2),u=m[0],d=m[1];return c.a.createElement("div",{className:"comment ".concat(o?"":"fade")},c.a.createElement("div",{className:"meta"},c.a.createElement("div",{className:"contributor",style:{color:U(a)}},a),c.a.createElement("div",{className:"likes ".concat(u?"upvoted":""),onClick:function(){return d(!u)}},u?i+1:i," ",c.a.createElement(ne.c,{style:{fontSize:"12px"}})),c.a.createElement("div",{className:"time"},t)),c.a.createElement("div",{className:"body"},r))}var Ee=function(e){var t=e.match.params.id,a=Object(n.useState)(1),r=Object(l.a)(a,2),o=r[0],i=r[1],s=j.token,m=j.isLoggedIn,u=Object(n.useState)(""),d=Object(l.a)(u,2),v=d[0],E=d[1],p=ie(t,{reload:o,token:s});return c.a.createElement("div",{className:"conversation"},c.a.createElement(me,{posts:p.posts,submit:function(){(function(e,t){return y("/post",{method:"POST",headers:{Authorization:e},body:{convo_id:t.convo_id,post:t.post}})})(s,{convo_id:t,post:v}).then((function(){i(-o),E("")})).catch((function(e){}))},body:v,setBody:E,isLoggedIn:m,isContributor:p.isContributor}),c.a.createElement(le,{title:p.title,views:p.views,likes:p.votes,isLoggedIn:m,isContributor:p.isContributor,navigate:e.history.push,id:t}),c.a.createElement(de,{comments:p.comments||[]}))},pe=a(422);a(415),a(416);function fe(e){var t=j().token,a=Object(n.useState)(""),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),u=m[0],d=m[1],v=Object(n.useState)(!1),E=Object(l.a)(v,2),p=E[0],f=E[1];return c.a.createElement("div",{className:"post"},c.a.createElement(be,{title:o,setTitle:i,body:u,setBody:d}),c.a.createElement("div",{className:"collaborators"},c.a.createElement("div",null,"Collaborators"),c.a.createElement(he,{color:"gray"},"Invited"),c.a.createElement(Ne,null),c.a.createElement("div",{className:"post-button",onClick:function(){f(!0),function(e,t){return y("/convo",{method:"POST",headers:{Authorization:e},body:{title:t.title,post:t.body}})}(t,{title:o,body:u}).then((function(t){f(!1),e.history.push("/conversation/".concat(t.convo_id))})).catch((function(e){f(!1)}))}},p?c.a.createElement(pe.a,{css:"\n                width: 50px;\n                height: 50px;\n                flex: 1;\n              "}):c.a.createElement("div",{className:"text"},"Post"))))}function be(e){var t=e.title,a=e.setTitle,n=e.body,r=e.setBody;return c.a.createElement("div",{className:"editor"},c.a.createElement("input",{className:"post-title",placeholder:"Title",value:t,onChange:function(e){return a(e.currentTarget.value)}}),c.a.createElement(oe,{value:n,onChange:function(e){return r(e)}}))}function he(e){var t=e.color,a=e.children;return c.a.createElement("div",{className:"section"},c.a.createElement("div",{className:"title"},a),c.a.createElement("div",{className:"users"},c.a.createElement(ge,{color:t},"Jack Hedaya"),c.a.createElement(ge,{color:t},"Abe Kassin"),c.a.createElement(ge,{color:t},"Judah Kishk")))}function ge(e){var t=e.color,a=void 0===t?void 0:t;return c.a.createElement("div",{className:"user"},c.a.createElement(F.a,{name:e.children,src:e.image||null,color:U(e.children),round:!0,size:25}),c.a.createElement("span",{className:"name",style:{color:a}},e.children))}function Ne(e){return c.a.createElement("div",{className:"invite"},c.a.createElement("div",{className:"title"},"Invite Someone"),c.a.createElement("div",{className:"field"},c.a.createElement("input",{className:"clear-input",placeholder:"username",autoComplete:"off"}),c.a.createElement(ne.a,{className:"submit"})))}a(417);var Oe=c.a.createContext();function ye(e){var t=e.component,a=e.authenticated,n=Object(i.a)(e,["component","authenticated"]);return c.a.createElement(m.b,Object.assign({},n,{render:function(e){return!0===a?c.a.createElement(t,Object.assign({},e,n)):c.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var je=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),i=Object(l.a)(o,2),u=i[0],d=i[1];return c.a.createElement(Oe.Provider,{value:{isLoggedIn:a,setIsLoggedIn:r,token:u,setToken:d}},c.a.createElement(B,{data:{token:u,isLoggedIn:a},debounce:500,onMount:function(e){r(e.isLoggedIn),d(e.token)}}),c.a.createElement(s.a,null,c.a.createElement("div",null,c.a.createElement(I,null),c.a.createElement(_,null),c.a.createElement("div",{className:"content"},c.a.createElement(m.d,null,c.a.createElement(m.a,{exact:!0,from:"/",to:"/home"}),c.a.createElement(m.b,{exact:!0,path:"/home",component:X}),c.a.createElement(m.b,{exact:!0,path:"/login",component:ee}),c.a.createElement(m.b,{exact:!0,path:"/register",component:ae}),c.a.createElement(m.b,{exact:!0,path:"/conversation/:id",component:Ee}),c.a.createElement(ye,{exact:!0,path:"/post",component:fe,authenticated:a}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[216,1,2]]]);
//# sourceMappingURL=main.d3c9c6e8.chunk.js.map