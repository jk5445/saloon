(this["webpackJsonpsaloon-client"]=this["webpackJsonpsaloon-client"]||[]).push([[0],{216:function(e,t,n){e.exports=n(419)},222:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},265:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(129),o=n.n(c),i=n(32),l=n(5),s=n(15),u=n(34),m=n(92),d=n(421),v=n(422),E=n(425),f=n(426),p=n(91),b=n(197),h=n.n(b);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){return!1};function j(e,t){var n=t.headers,a=t.body,r=Object(i.a)(t,["headers","body"]),c=h.a.join(N()?"https://agile-tor-73556.herokuapp.com/api/v1":"/api/v1",e);return fetch(c,O({headers:O({"Content-Type":"application/json"},n)},r,{body:JSON.stringify(a)})).then((function(e){if(e.ok)return e.json();throw e}))}function y(){return Object(a.useContext)(ye)}function k(){var e=y(),t=e.token,n=e.setToken,r=e.isLoggedIn,c=e.setIsLoggedIn,o=Object(a.useState)(null),i=Object(l.a)(o,2),s=i[0],u=i[1];return Object(a.useEffect)((function(){if(t&&r){(function(e){return j("/user",{headers:{Authorization:e}})})(t).then((function(e){return u(e)})).catch((function(e){return n(null),c(!1),void u(null)}))}}),[t,n,r,c]),s}n(222);function w(e){return r.a.createElement("div",{className:"search-wrapper"},r.a.createElement("input",{placeholder:"Search..."}),r.a.createElement("div",null,r.a.createElement("div",{className:"body"},r.a.createElement(m.b,{size:20,className:"icon",color:"white"}))))}function S(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1],s=y(),u=s.setIsLoggedIn,m=s.setToken,p=function(t){var n=t.to,a=Object(i.a)(t,["to"]);return r.a.createElement(d.a,Object.assign({onClick:function(){return e.redirect(n)}},a))};return r.a.createElement(v.a,{isOpen:c,toggle:function(){return o(!c)},nav:!0},r.a.createElement(E.a,{caret:!0,className:"login-account"},"Hey, ",e.name),r.a.createElement(f.a,{right:!0},r.a.createElement(p,{to:"/user"},"Profile"),r.a.createElement(p,{to:"/saved-conversations"},"Saved Conversations"),r.a.createElement(p,{to:"/history"},"History"),r.a.createElement(d.a,{divider:!0}),r.a.createElement(p,{to:"/settings"},"Settings"),r.a.createElement(d.a,{divider:!0}),r.a.createElement(d.a,{onClick:function(){m(null),u(!1),e.redirect("/")}},"Log Out")))}var C=Object(u.g)((function(e){var t=y().isLoggedIn,n=k();return r.a.createElement("div",{className:"header"},r.a.createElement(s.b,{to:"/",className:"saloon"},"Saloon"),r.a.createElement(w,null),t&&r.a.createElement(s.b,{to:"/post",className:"login-account"},"Post"),t?r.a.createElement(S,{name:n?n.first_name:void 0,redirect:e.history.push}):r.a.createElement(s.b,{to:"/login",className:"login-account"},"Login"))}));n(228);var I=Object(u.g)((function(e){return r.a.createElement(s.b,{to:e.to,className:[e.location.pathname.includes(e.to)?"selected":"","nav-item"].join(" ")},e.children)})),L=function(){return r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"links"},r.a.createElement(I,{to:"/home"},"Home")))},_=n(199),x=n(200),P=n(213),T=n(201),V=n(214),z=n(202),D=n.n(z),A=n(203),J=n.n(A),B=function(e){function t(){var e,n;Object(_.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(P.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).persist=D()((function(e){window.localStorage.setItem(n.props.name,JSON.stringify(e))}),n.props.debounce),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.data;J()(t,this.props.data)||this.persist(this.props.data)}},{key:"componentDidMount",value:function(){var e=window.localStorage.getItem(this.props.name);e&&null!==e&&this.props.onMount(JSON.parse(e))}},{key:"render",value:function(){return null}}]),t}(r.a.Component);B.defaultProps={debounce:300};var F=n(66),q=n(131),M=n(424);function U(e){return r.a.createElement(q.a,Object.assign({matchers:[new M.a("url")]},e))}var H=n(205);function G(e){return H({seed:e})}n(229);function W(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item",onClick:function(){return e.navigate("/conversation/".concat(e.convo_id))}},r.a.createElement("div",{className:"title"},e.title),r.a.createElement("div",{className:"inner"},r.a.createElement(K,e),r.a.createElement("div",{className:"body"},r.a.createElement(U,{content:e.description})))),r.a.createElement("div",{className:"break"}))}function K(e){var t;return r.a.createElement("div",{className:"meta"},r.a.createElement(R,{people:e.contributors,description:(t=e.contributors,1===t.length?t[0]:2===t.length?"".concat(t[0]," and ").concat(t[1]):3===t.length?"".concat(t[0],", ").concat(t[1]," and ").concat(t[2]):4===t.length?"".concat(t[0],", ").concat(t[1],", ").concat(t[2]," and ").concat(t[3]):void 0)}),r.a.createElement("div",{className:"creator"},e.creator),r.a.createElement("div",{className:"convo-data"},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,"edited ",e.age),r.a.createElement("div",null,"viewed ",e.views," times")),r.a.createElement("div",{className:"right"},r.a.createElement("div",null,e.votes," votes"),r.a.createElement("div",null,e.comments," comments"))))}function R(e){return r.a.createElement("div",{className:"discussed-by"},r.a.createElement(F.a,{name:e.people[0],color:G(e.people[0]),round:!0,size:42}),e.people.length>1&&r.a.createElement(F.a,{name:e.people[1],color:G(e.people[1]),round:!0,size:42}),r.a.createElement("span",{className:"text"},r.a.createElement("div",null,"Discussion by ",e.description)))}var $=Object(u.g)((function(e){var t=e.items,n=[];return r.a.createElement("div",{className:"feed"},(t||[]).map((function(t){return!n.includes(t.convo_id)&&(n.push(t.convo_id),r.a.createElement(W,Object.assign({},t,{key:"Feed/".concat(t.convo_id),navigate:function(t){return e.history.push(t)},description:t.post})))})))}));function Q(){var e=y(),t=e.token,n=e.setToken,r=e.isLoggedIn,c=e.setIsLoggedIn,o=e.didPersistLoad,i=Object(a.useState)(null),s=Object(l.a)(i,2),u=s[0],m=s[1];return Object(a.useEffect)((function(){if(!u&&o){(function(e){return j("/feed",{method:"GET",headers:e?{Authorization:e}:void 0})})(t).then((function(e){return m(e.convos)})).catch((function(e){return n(null),c(!1),void m(null)}))}}),[t,u,n,r,c,o]),u}var X=function(){var e=Q();return r.a.createElement("div",{className:"home"},r.a.createElement($,{items:e}))},Y=n(64);n(265);function Z(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field-title"},e.placeholder),r.a.createElement(Y.b,e),r.a.createElement(Y.a,{name:e.name,render:function(e){return r.a.createElement("div",{className:"error"},e.replace("_"," "))}}))}var ee=function(e){var t=y(),n=t.isLoggedIn,a=t.setIsLoggedIn,c=t.setToken;return n?r.a.createElement(u.a,{to:e.location.state?e.location.state.from.pathname:"/"}):r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Login"),r.a.createElement(Y.d,{initialValues:{email:"",password:""},onSubmit:function(e,t){(function(e,t){return j("/user/login",{method:"POST",body:{email:e,password:t}})})(e.email,e.password).then((function(e){c(e.token),a(!0)})).catch((function(e){t.setErrors({password:"incorrect password"}),t.setSubmitting(!1)}))}},(function(e){var t=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement(Z,{type:"text",name:"email",placeholder:"email"}),r.a.createElement(Z,{type:"password",name:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",disabled:t},"Submit"),r.a.createElement("div",{className:"switch-here"},"Don't have an account? Join ",r.a.createElement(s.b,{to:"/register"},"here")))})))},te=n(55);var ne=function(){var e=y(),t=e.setToken,n=e.setIsLoggedIn;return e.isLoggedIn?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Register"),r.a.createElement(Y.d,{initialValues:{username:"",password:"",first_name:"",last_name:"",email:""},onSubmit:function(e,a){(function(e){var t=e.username,n=e.password;return j("/user/signup",{method:"POST",body:{username:t,first_name:e.first_name,last_name:e.last_name,password:n,email:e.email}})})(e).then((function(e){t(e.token),n(!0)})).catch((function(e){return a.setFieldError("email","something went wrong")}))},validationSchema:te.object().shape({first_name:te.string().required(),last_name:te.string().required(),username:te.string().required(),password:te.string().required()})},(function(e){var t=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement(Z,{type:"email",name:"email",placeholder:"email"}),r.a.createElement(Z,{type:"text",name:"first_name",placeholder:"first name"}),r.a.createElement(Z,{type:"text",name:"last_name",placeholder:"last name"}),r.a.createElement(Z,{type:"text",name:"username",placeholder:"username"}),r.a.createElement(Z,{type:"password",name:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",disabled:t},"Submit"),r.a.createElement("div",{className:"switch-here"},"Already have an account? Login ",r.a.createElement(s.b,{to:"/login"},"here")))})))},ae=n(54),re=n(211),ce=n.n(re);function oe(e){var t=e.value,n=e.setValue,a=Object(i.a)(e,["value","setValue"]);return r.a.createElement(ce.a,Object.assign({theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link"]]},formats:["bold","italic","underline","strike","link"],value:t||"",onChange:function(e){return n(e)}},a))}function ie(e,t){var n=t.reload,r=t.token,c=Object(a.useState)({}),o=Object(l.a)(c,2),i=o[0],s=o[1],u=y().didPersistLoad;return Object(a.useEffect)((function(){u&&function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).token;return j("/convo/".concat(e),{method:"GET",headers:t?{Authorization:t}:void 0})}(e,{token:r}).then((function(e){return s(e)})).catch((function(e){}))}),[e,n,r,u]),i}n(414),n(415);var le=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],i=c[1],s=function(){return i(!o)},u=Object(a.useState)(0),m=Object(l.a)(u,2),d=m[0],v=m[1],E=[];return Object(a.useMemo)((function(){return r.a.Children.forEach(t,(function(e,t){r.a.isValidElement(e)&&E.push({index:t,Icon:e.props.icon,title:e.props.title})}))}),[t,E]),r.a.createElement("div",{className:"sidebar ".concat(o?"":"minimized")},r.a.createElement("div",{className:"icons"},E.map((function(e){var t=e.index,n=e.Icon;return r.a.createElement("div",{className:"icon",key:"Sidebar/Icon/".concat(t),onClick:function(){return function(e){e===d?s():v(e)}(t)}},r.a.createElement(n,null))}))),r.a.createElement("div",{className:"sidebar-inner ".concat(o?"":"fade")},r.a.createElement("div",{className:"title"},E[d].title),r.a.createElement((function(){var e=r.a.Children.count(t);return 0===e?null:1===e?t:t[d]}),null)))};function se(e){var t=e.title,n=e.views,a=e.votes,c=e.userVote,o=e.updateVote,i=e.isLoggedIn,l=e.isContributor,s=e.navigate,u=e.id;return r.a.createElement("div",{className:"d-title"},r.a.createElement(ue,{votes:a,userVote:c,setVote:function(e){o(e===c?0:e)}}),r.a.createElement("div",null,r.a.createElement("div",{className:"text"},t),(!i||!l)&&r.a.createElement("div",{className:"join",onClick:function(){return!l&&s({pathname:"/login",state:{from:{pathname:"/conversation/".concat(u)}}})}},"Join Conversation")),r.a.createElement("div",{className:"views"},n," views"))}function ue(e){var t=e.votes,n=void 0===t?"0":t,a=e.userVote,c=e.setVote;return r.a.createElement("div",{className:"vote"},r.a.createElement(ae.c,{className:"thumb ".concat(1===a?"upvoted":""),onClick:function(){return c(1)}}),r.a.createElement("span",{className:"amount"},n),r.a.createElement(ae.b,{className:"thumb ".concat(-1===a?"upvoted":""),onClick:function(){return c(-1)}}))}function me(e){var t=e.posts,n=e.body,a=e.setBody,c=e.submit,o=e.isLoggedIn,i=e.isContributor;return r.a.createElement("div",{className:"discussion"},r.a.createElement("div",{className:"inner"},t&&t.map((function(e,t){return r.a.createElement(de,Object.assign({},e,{key:"".concat(e.contributor,"/").concat(e.time_of_post,"/").concat(t)}))}))),o&&i&&r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement(oe,{value:n,setValue:a}),r.a.createElement("div",{className:"post-button",onClick:c},"Submit")))}function de(e){var t=e.contributor,n=e.post;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item"},r.a.createElement("span",{style:{color:G(t)}},t,": "),r.a.createElement(U,{content:n})),r.a.createElement("div",{className:"break"}))}function ve(e){return r.a.createElement(r.a.Fragment,null,e.comments.map((function(e,t){return r.a.createElement(Ee,Object.assign({key:"".concat(e.contributor,"/").concat(e.time_of_comment,"/").concat(t)},e))})),r.a.createElement("div",{className:"add"},r.a.createElement("textarea",null),r.a.createElement("button",{type:"submit"},"Submit")))}function Ee(e){var t=e.time_of_comment,n=e.contributor,c=e.body,o=e.likes,i=Object(a.useState)(!1),s=Object(l.a)(i,2),u=s[0],m=s[1];return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"meta"},r.a.createElement("div",{className:"contributor",style:{color:G(n)}},n),r.a.createElement("div",{className:"likes ".concat(u?"upvoted":""),onClick:function(){return m(!u)}},u?o+1:o," ",r.a.createElement(ae.c,{style:{fontSize:"12px"}})),r.a.createElement("div",{className:"time"},t)),r.a.createElement("div",{className:"body"},c))}var fe=function(e){var t=e.match.params.id,n=Object(a.useState)(1),c=Object(l.a)(n,2),o=c[0],i=c[1],s=function(){return i(-o)},u=y(),d=u.token,v=u.isLoggedIn,E=Object(a.useState)(""),f=Object(l.a)(E,2),p=f[0],b=f[1],h=ie(t,{reload:o,token:d});return r.a.createElement("div",{className:"conversation"},r.a.createElement(me,{posts:h.posts,submit:function(){(function(e,t){return j("/post",{method:"POST",headers:{Authorization:e},body:{convo_id:t.convo_id,post:t.post}})})(d,{convo_id:t,post:p}).then((function(){s(),b("")})).catch((function(e){}))},body:p,setBody:b,isLoggedIn:v,isContributor:h.isContributor}),r.a.createElement(se,{title:h.title,views:h.views,votes:h.votes,userVote:h.vote,updateVote:function(e){(function(e,t){var n=t.token,a=t.vote;return j("/convo/".concat(e,"/vote/").concat(a),{method:"PUT",headers:n?{Authorization:n}:void 0})})(t,{token:d,vote:e}).then((function(){return s()})).catch((function(e){}))},isLoggedIn:v,isContributor:h.isContributor,navigate:e.history.push,id:t}),r.a.createElement(le,null,r.a.createElement(ve,{icon:m.a,title:"Comments",comments:h.comments||[]})))},pe=n(212),be=n(423);n(416),n(417);function he(e){var t=y().token,n=k(),c=Object(a.useState)(""),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(a.useState)(""),m=Object(l.a)(u,2),d=m[0],v=m[1],E=Object(a.useState)([]),f=Object(l.a)(E,2),p=f[0],b=f[1],h=Object(a.useState)(!1),g=Object(l.a)(h,2),O=g[0],N=g[1];return r.a.createElement("div",{className:"post"},r.a.createElement(ge,{title:i,setTitle:s,body:d,setBody:v}),r.a.createElement("div",{className:"collaborators"},r.a.createElement("div",null,"Collaborators"),r.a.createElement(Oe,{color:"gray",invited:p},"Invited"),r.a.createElement(je,{inviteUser:function(e){return p.includes(e)||e.toLowerCase()===n.username.toLowerCase()?null:b([].concat(Object(pe.a)(p),[e]))}}),r.a.createElement("div",{className:"post-button",onClick:function(){N(!0),function(e,t){return j("/convo",{method:"POST",headers:{Authorization:e},body:{title:t.title,post:t.body}})}(t,{title:i,body:d}).then((function(t){N(!1),e.history.push("/conversation/".concat(t.convo_id))})).catch((function(e){N(!1)}))}},O?r.a.createElement(be.a,{css:"\n                width: 50px;\n                height: 50px;\n                flex: 1;\n              "}):r.a.createElement("div",{className:"text"},"Post"))))}function ge(e){var t=e.title,n=e.setTitle,a=e.body,c=e.setBody;return r.a.createElement("div",{className:"editor"},r.a.createElement("input",{className:"post-title",placeholder:"Title",value:t,onChange:function(e){return n(e.currentTarget.value)}}),r.a.createElement(oe,{value:a,onChange:function(e){return c(e)}}))}function Oe(e){var t=e.color,n=e.invited,a=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"title"},a),r.a.createElement("div",{className:"users"},n.map((function(e){return r.a.createElement(Ne,{key:"invite/".concat(e),color:t},e)}))))}function Ne(e){var t=e.color,n=void 0===t?void 0:t;return r.a.createElement("div",{className:"user"},r.a.createElement(F.a,{name:e.children,src:e.image||null,color:G(e.children),round:!0,size:25}),r.a.createElement("span",{className:"name",style:{color:n}},e.children))}function je(e){var t,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=c[0],i=c[1],s=function(){e.inviteUser(o),i(""),t.focus()};return r.a.createElement("div",{className:"invite"},r.a.createElement("div",{className:"title"},"Invite Someone"),r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"clear-input",placeholder:"username",autoComplete:"off",value:o,onChange:function(e){return i(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key?s():null},ref:function(e){return t=e}}),r.a.createElement(ae.a,{className:"submit",onClick:s})))}n(418);var ye=r.a.createContext();function ke(e){var t=e.component,n=e.authenticated,a=Object(i.a)(e,["component","authenticated"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return!0===n?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var we=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(l.a)(o,2),m=i[0],d=i[1],v=Object(a.useState)(null),E=Object(l.a)(v,2),f=E[0],p=E[1];return r.a.createElement(ye.Provider,{value:{isLoggedIn:m,setIsLoggedIn:d,token:f,setToken:p,didPersistLoad:n}},r.a.createElement(B,{data:{token:f,isLoggedIn:m},debounce:500,onMount:function(e){c(!0),d(e.isLoggedIn),p(e.token)}}),r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement(L,null),r.a.createElement("div",{className:"content"},r.a.createElement(u.d,null,r.a.createElement(u.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(u.b,{exact:!0,path:"/home",component:X}),r.a.createElement(u.b,{exact:!0,path:"/login",component:ee}),r.a.createElement(u.b,{exact:!0,path:"/register",component:ne}),r.a.createElement(u.b,{exact:!0,path:"/conversation/:id",component:fe}),r.a.createElement(ke,{exact:!0,path:"/post",component:he,authenticated:m}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[216,1,2]]]);
//# sourceMappingURL=main.196289c4.chunk.js.map