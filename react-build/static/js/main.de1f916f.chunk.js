(window["webpackJsonpsaloon-client"]=window["webpackJsonpsaloon-client"]||[]).push([[0],{217:function(e,t,n){e.exports=n(419)},223:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},266:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(129),o=n.n(c),i=n(33),s=n(5),l=n(15),m=n(35),u=n(92),d=n(421),v=n(422),E=n(425),f=n(426),p=n(91),b=n(197),h=n.n(b);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){return!1};function j(e,t){var n=t.headers,a=t.body,r=Object(i.a)(t,["headers","body"]),c=h.a.join(N()?"https://agile-tor-73556.herokuapp.com/api/v1":"/api/v1",e);return fetch(c,O({headers:O({"Content-Type":"application/json"},n)},r,{body:JSON.stringify(a)})).then((function(e){if(e.ok)return e.json();throw e}))}function y(){return Object(a.useContext)(je)}function w(){var e=y(),t=e.token,n=e.setToken,r=e.isLoggedIn,c=e.setIsLoggedIn,o=Object(a.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return Object(a.useEffect)((function(){if(t&&r){(function(e){return j("/user",{headers:{Authorization:e}})})(t).then((function(e){return m(e)})).catch((function(e){return n(null),c(!1),void m(null)}))}}),[t,n,r,c]),l}n(223);function k(e){return r.a.createElement("div",{className:"search-wrapper"},r.a.createElement("input",{placeholder:"Search..."}),r.a.createElement("div",null,r.a.createElement("div",{className:"body"},r.a.createElement(u.b,{size:20,className:"icon",color:"white"}))))}function S(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],o=n[1],l=y(),m=l.setIsLoggedIn,u=l.setToken,p=function(t){var n=t.to,a=Object(i.a)(t,["to"]);return r.a.createElement(d.a,Object.assign({onClick:function(){return e.redirect(n)}},a))};return r.a.createElement(v.a,{isOpen:c,toggle:function(){return o(!c)},nav:!0},r.a.createElement(E.a,{caret:!0,className:"login-account"},"Hey, ",e.name),r.a.createElement(f.a,{right:!0},r.a.createElement(p,{to:"/user"},"Profile"),r.a.createElement(p,{to:"/saved-conversations"},"Saved Conversations"),r.a.createElement(p,{to:"/history"},"History"),r.a.createElement(d.a,{divider:!0}),r.a.createElement(p,{to:"/settings"},"Settings"),r.a.createElement(d.a,{divider:!0}),r.a.createElement(d.a,{onClick:function(){u(null),m(!1),e.redirect("/")}},"Log Out")))}var C=Object(m.g)((function(e){var t=y().isLoggedIn,n=w();return r.a.createElement("div",{className:"header"},r.a.createElement(l.b,{to:"/",className:"saloon"},"Saloon"),r.a.createElement(k,null),t&&r.a.createElement(l.b,{to:"/post",className:"login-account"},"Post"),t?r.a.createElement(S,{name:n?n.first_name:void 0,redirect:e.history.push}):r.a.createElement(l.b,{to:"/login",className:"login-account"},"Login"))}));n(229);var I=Object(m.g)((function(e){return r.a.createElement(l.b,{to:e.to,className:[e.location.pathname.includes(e.to)?"selected":"","nav-item"].join(" ")},e.children)})),L=function(){return r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"links"},r.a.createElement(I,{to:"/home"},"Home")))},_=n(200),x=n(201),P=n(214),T=n(202),V=n(215),z=n(203),D=n.n(z),A=n(204),J=n.n(A),B=function(e){function t(){var e,n;Object(_.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(P.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).persist=D()((function(e){window.localStorage.setItem(n.props.name,JSON.stringify(e))}),n.props.debounce),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.data;J()(t,this.props.data)||this.persist(this.props.data)}},{key:"componentDidMount",value:function(){var e=window.localStorage.getItem(this.props.name);e&&null!==e&&this.props.onMount(JSON.parse(e))}},{key:"render",value:function(){return null}}]),t}(r.a.Component);B.defaultProps={debounce:300};var F=n(66),q=n(131),U=n(424);function H(e){return r.a.createElement(q.a,Object.assign({matchers:[new U.a("url")]},e))}var M=n(206);function G(e){return M({seed:e})}n(230);function W(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item",onClick:function(){return e.navigate("/conversation/".concat(e.convo_id))}},r.a.createElement("div",{className:"title"},e.title),r.a.createElement("div",{className:"inner"},r.a.createElement(K,e),r.a.createElement("div",{className:"body"},r.a.createElement(H,{content:e.description})))),r.a.createElement("div",{className:"break"}))}function K(e){var t;return r.a.createElement("div",{className:"meta"},r.a.createElement(R,{people:e.contributors,description:(t=e.contributors,1===t.length?t[0]:2===t.length?"".concat(t[0]," and ").concat(t[1]):3===t.length?"".concat(t[0],", ").concat(t[1]," and ").concat(t[2]):4===t.length?"".concat(t[0],", ").concat(t[1],", ").concat(t[2]," and ").concat(t[3]):void 0)}),r.a.createElement("div",{className:"creator"},e.creator),r.a.createElement("div",{className:"convo-data"},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,"edited ",e.age),r.a.createElement("div",null,"viewed ",e.views," times")),r.a.createElement("div",{className:"right"},r.a.createElement("div",null,e.votes," votes"),r.a.createElement("div",null,e.comments," comments"))))}function R(e){return r.a.createElement("div",{className:"discussed-by"},r.a.createElement(F.a,{name:e.people[0],color:G(e.people[0]),round:!0,size:42}),e.people.length>1&&r.a.createElement(F.a,{name:e.people[1],color:G(e.people[1]),round:!0,size:42}),r.a.createElement("span",{className:"text"},r.a.createElement("div",null,"Discussion by ",e.description)))}var $=Object(m.g)((function(e){var t=e.items,n=[];return r.a.createElement("div",{className:"feed"},(t||[]).map((function(t){return!n.includes(t.convo_id)&&(n.push(t.convo_id),r.a.createElement(W,Object.assign({},t,{key:"Feed/".concat(t.convo_id),navigate:function(t){return e.history.push(t)},description:t.post})))})))}));function Q(){var e=y(),t=e.token,n=e.setToken,r=e.isLoggedIn,c=e.setIsLoggedIn,o=e.didPersistLoad,i=Object(a.useState)(null),l=Object(s.a)(i,2),m=l[0],u=l[1];return Object(a.useEffect)((function(){if(!m&&o){(function(e){return j("/feed",{method:"GET",headers:e?{Authorization:e}:void 0})})(t).then((function(e){return u(e.convos)})).catch((function(e){return n(null),c(!1),void u(null)}))}}),[t,m,n,r,c,o]),m}var X=function(){var e=Q();return r.a.createElement("div",{className:"home"},r.a.createElement($,{items:e}))},Y=n(64);n(266);function Z(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field-title"},e.placeholder),r.a.createElement(Y.b,e),r.a.createElement(Y.a,{name:e.name,render:function(e){return r.a.createElement("div",{className:"error"},e.replace("_"," "))}}))}var ee=function(e){var t=y(),n=t.isLoggedIn,a=t.setIsLoggedIn,c=t.setToken;return n?r.a.createElement(m.a,{to:e.location.state?e.location.state.from.pathname:"/"}):r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Login"),r.a.createElement(Y.d,{initialValues:{email:"",password:""},onSubmit:function(e,t){(function(e,t){return j("/user/login",{method:"POST",body:{email:e,password:t}})})(e.email,e.password).then((function(e){c(e.token),a(!0)})).catch((function(e){t.setErrors({password:"incorrect password"}),t.setSubmitting(!1)}))}},(function(e){var t=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement(Z,{type:"text",name:"email",placeholder:"email"}),r.a.createElement(Z,{type:"password",name:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",disabled:t},"Submit"),r.a.createElement("div",{className:"switch-here"},"Don't have an account? Join ",r.a.createElement(l.b,{to:"/register"},"here")))})))},te=n(55);var ne=function(){var e=y(),t=e.setToken,n=e.setIsLoggedIn;return e.isLoggedIn?r.a.createElement(m.a,{to:"/home"}):r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Register"),r.a.createElement(Y.d,{initialValues:{username:"",password:"",first_name:"",last_name:"",email:""},onSubmit:function(e,a){(function(e){var t=e.username,n=e.password;return j("/user/signup",{method:"POST",body:{username:t,first_name:e.first_name,last_name:e.last_name,password:n,email:e.email}})})(e).then((function(e){t(e.token),n(!0)})).catch((function(e){return a.setFieldError("email","something went wrong")}))},validationSchema:te.object().shape({first_name:te.string().required(),last_name:te.string().required(),username:te.string().required(),password:te.string().required()})},(function(e){var t=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement(Z,{type:"email",name:"email",placeholder:"email"}),r.a.createElement(Z,{type:"text",name:"first_name",placeholder:"first name"}),r.a.createElement(Z,{type:"text",name:"last_name",placeholder:"last name"}),r.a.createElement(Z,{type:"text",name:"username",placeholder:"username"}),r.a.createElement(Z,{type:"password",name:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",disabled:t},"Submit"),r.a.createElement("div",{className:"switch-here"},"Already have an account? Login ",r.a.createElement(l.b,{to:"/login"},"here")))})))},ae=n(54),re=n(212),ce=n.n(re);function oe(e){var t=e.value,n=e.setValue,a=Object(i.a)(e,["value","setValue"]);return r.a.createElement(ce.a,Object.assign({theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link"]]},formats:["bold","italic","underline","strike","link"],value:t||"",onChange:function(e){return n(e)}},a))}function ie(e,t){var n=t.reload,r=t.token,c=Object(a.useState)({}),o=Object(s.a)(c,2),i=o[0],l=o[1],m=y().didPersistLoad;return Object(a.useEffect)((function(){m&&function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).token;return j("/convo/".concat(e),{method:"GET",headers:t?{Authorization:t}:void 0})}(e,{token:r}).then((function(e){return l(e)})).catch((function(e){}))}),[e,n,r,m]),i}n(415);function se(e){var t=e.title,n=e.views,a=e.votes,c=e.userVote,o=e.updateVote,i=e.isLoggedIn,s=e.isContributor,l=e.navigate,m=e.id;return r.a.createElement("div",{className:"d-title"},r.a.createElement(le,{votes:a,userVote:c,setVote:function(e){o(e===c?0:e)}}),r.a.createElement("div",null,r.a.createElement("div",{className:"text"},t),(!i||!s)&&r.a.createElement("div",{className:"join",onClick:function(){return!s&&l({pathname:"/login",state:{from:{pathname:"/conversation/".concat(m)}}})}},"Join Conversation")),r.a.createElement("div",{className:"views"},n," views"))}function le(e){var t=e.votes,n=void 0===t?"0":t,a=e.userVote,c=e.setVote;return r.a.createElement("div",{className:"vote"},r.a.createElement(ae.c,{className:"thumb ".concat(1===a?"upvoted":""),onClick:function(){return c(1)}}),r.a.createElement("span",{className:"amount"},n),r.a.createElement(ae.b,{className:"thumb ".concat(-1===a?"upvoted":""),onClick:function(){return c(-1)}}))}function me(e){var t=e.posts,n=e.body,a=e.setBody,c=e.submit,o=e.isLoggedIn,i=e.isContributor;return r.a.createElement("div",{className:"discussion"},r.a.createElement("div",{className:"inner"},t&&t.map((function(e,t){return r.a.createElement(ue,Object.assign({},e,{key:"".concat(e.contributor,"/").concat(e.time_of_post,"/").concat(t)}))}))),o&&i&&r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement(oe,{value:n,setValue:a}),r.a.createElement("div",{className:"post-button",onClick:c},"Submit")))}function ue(e){var t=e.contributor,n=e.post;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item"},r.a.createElement("span",{style:{color:G(t)}},t,": "),r.a.createElement(H,{content:n})),r.a.createElement("div",{className:"break"}))}function de(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",{className:"comments ".concat(c?"":"minimized")},r.a.createElement("div",{className:"comment-header"},r.a.createElement("div",{className:"button ".concat(c?"rotate":""),onClick:function(){return o(!c)}},r.a.createElement(u.a,null)),r.a.createElement("div",{className:"title ".concat(c?"":"fade")},"Comments")),e.comments.map((function(e,t){return r.a.createElement(ve,Object.assign({key:"".concat(e.contributor,"/").concat(e.time_of_comment,"/").concat(t),_showing:c},e))})),r.a.createElement("div",{className:"add ".concat(c?"":"fade")},r.a.createElement("textarea",null),r.a.createElement("button",{type:"submit"},"Submit")))}function ve(e){var t=e.time_of_comment,n=e.contributor,c=e.body,o=e._showing,i=e.likes,l=Object(a.useState)(!1),m=Object(s.a)(l,2),u=m[0],d=m[1];return r.a.createElement("div",{className:"comment ".concat(o?"":"fade")},r.a.createElement("div",{className:"meta"},r.a.createElement("div",{className:"contributor",style:{color:G(n)}},n),r.a.createElement("div",{className:"likes ".concat(u?"upvoted":""),onClick:function(){return d(!u)}},u?i+1:i," ",r.a.createElement(ae.c,{style:{fontSize:"12px"}})),r.a.createElement("div",{className:"time"},t)),r.a.createElement("div",{className:"body"},c))}var Ee=function(e){var t=e.match.params.id,n=Object(a.useState)(1),c=Object(s.a)(n,2),o=c[0],i=c[1],l=function(){return i(-o)},m=y(),u=m.token,d=m.isLoggedIn,v=Object(a.useState)(""),E=Object(s.a)(v,2),f=E[0],p=E[1],b=ie(t,{reload:o,token:u});return r.a.createElement("div",{className:"conversation"},r.a.createElement(me,{posts:b.posts,submit:function(){(function(e,t){return j("/post",{method:"POST",headers:{Authorization:e},body:{convo_id:t.convo_id,post:t.post}})})(u,{convo_id:t,post:f}).then((function(){l(),p("")})).catch((function(e){}))},body:f,setBody:p,isLoggedIn:d,isContributor:b.isContributor}),r.a.createElement(se,{title:b.title,views:b.views,votes:b.votes,userVote:b.vote,updateVote:function(e){(function(e,t){var n=t.token,a=t.vote;return j("/convo/".concat(e,"/vote/").concat(a),{method:"PUT",headers:n?{Authorization:n}:void 0})})(t,{token:u,vote:e}).then((function(){return l()})).catch((function(e){}))},isLoggedIn:d,isContributor:b.isContributor,navigate:e.history.push,id:t}),r.a.createElement(de,{comments:b.comments||[]}))},fe=n(213),pe=n(423);n(416),n(417);function be(e){var t=y().token,n=w(),c=Object(a.useState)(""),o=Object(s.a)(c,2),i=o[0],l=o[1],m=Object(a.useState)(""),u=Object(s.a)(m,2),d=u[0],v=u[1],E=Object(a.useState)([]),f=Object(s.a)(E,2),p=f[0],b=f[1],h=Object(a.useState)(!1),g=Object(s.a)(h,2),O=g[0],N=g[1];return r.a.createElement("div",{className:"post"},r.a.createElement(he,{title:i,setTitle:l,body:d,setBody:v}),r.a.createElement("div",{className:"collaborators"},r.a.createElement("div",null,"Collaborators"),r.a.createElement(ge,{color:"gray",invited:p},"Invited"),r.a.createElement(Ne,{inviteUser:function(e){return p.includes(e)||e.toLowerCase()===n.username.toLowerCase()?null:b([].concat(Object(fe.a)(p),[e]))}}),r.a.createElement("div",{className:"post-button",onClick:function(){N(!0),function(e,t){return j("/convo",{method:"POST",headers:{Authorization:e},body:{title:t.title,post:t.body}})}(t,{title:i,body:d}).then((function(t){N(!1),e.history.push("/conversation/".concat(t.convo_id))})).catch((function(e){N(!1)}))}},O?r.a.createElement(pe.a,{css:"\n                width: 50px;\n                height: 50px;\n                flex: 1;\n              "}):r.a.createElement("div",{className:"text"},"Post"))))}function he(e){var t=e.title,n=e.setTitle,a=e.body,c=e.setBody;return r.a.createElement("div",{className:"editor"},r.a.createElement("input",{className:"post-title",placeholder:"Title",value:t,onChange:function(e){return n(e.currentTarget.value)}}),r.a.createElement(oe,{value:a,onChange:function(e){return c(e)}}))}function ge(e){var t=e.color,n=e.invited,a=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"title"},a),r.a.createElement("div",{className:"users"},n.map((function(e){return r.a.createElement(Oe,{key:"invite/".concat(e),color:t},e)}))))}function Oe(e){var t=e.color,n=void 0===t?void 0:t;return r.a.createElement("div",{className:"user"},r.a.createElement(F.a,{name:e.children,src:e.image||null,color:G(e.children),round:!0,size:25}),r.a.createElement("span",{className:"name",style:{color:n}},e.children))}function Ne(e){var t,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],i=c[1],l=function(){e.inviteUser(o),i(""),t.focus()};return r.a.createElement("div",{className:"invite"},r.a.createElement("div",{className:"title"},"Invite Someone"),r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"clear-input",placeholder:"username",autoComplete:"off",value:o,onChange:function(e){return i(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key?l():null},ref:function(e){return t=e}}),r.a.createElement(ae.a,{className:"submit",onClick:l})))}n(418);var je=r.a.createContext();function ye(e){var t=e.component,n=e.authenticated,a=Object(i.a)(e,["component","authenticated"]);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return!0===n?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var we=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),u=i[0],d=i[1],v=Object(a.useState)(null),E=Object(s.a)(v,2),f=E[0],p=E[1];return r.a.createElement(je.Provider,{value:{isLoggedIn:u,setIsLoggedIn:d,token:f,setToken:p,didPersistLoad:n}},r.a.createElement(B,{data:{token:f,isLoggedIn:u},debounce:500,onMount:function(e){c(!0),d(e.isLoggedIn),p(e.token)}}),r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement(L,null),r.a.createElement("div",{className:"content"},r.a.createElement(m.d,null,r.a.createElement(m.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(m.b,{exact:!0,path:"/home",component:X}),r.a.createElement(m.b,{exact:!0,path:"/login",component:ee}),r.a.createElement(m.b,{exact:!0,path:"/register",component:ne}),r.a.createElement(m.b,{exact:!0,path:"/conversation/:id",component:Ee}),r.a.createElement(ye,{exact:!0,path:"/post",component:be,authenticated:u}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[217,1,2]]]);
//# sourceMappingURL=main.de1f916f.chunk.js.map