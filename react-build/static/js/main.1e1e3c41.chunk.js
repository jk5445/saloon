(window["webpackJsonpsaloon-client"]=window["webpackJsonpsaloon-client"]||[]).push([[0],{216:function(e,t,a){e.exports=a(418)},222:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},265:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},417:function(e,t,a){},418:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(129),o=a.n(c),i=a(33),s=a(5),l=a(15),m=a(35),u=a(92),d=a(420),v=a(421),E=a(424),p=a(425),f=a(91),b=a(197),h=a.n(b);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=function(){return!1};function j(e,t){var a=t.headers,n=t.body,r=Object(i.a)(t,["headers","body"]),c=h.a.join(N()?"https://agile-tor-73556.herokuapp.com/api/v1":"/api/v1",e);return fetch(c,O({headers:O({"Content-Type":"application/json"},a)},r,{body:JSON.stringify(n)})).then((function(e){if(e.ok)return e.json();throw e}))}function y(){var e=Object(n.useContext)(Oe),t=e.token,a=e.setToken,r=e.isLoggedIn,c=e.setIsLoggedIn,o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return Object(n.useEffect)((function(){if(t&&r){(function(e){return j("/user",{headers:{Authorization:e}})})(t).then((function(e){return m(e)})).catch((function(e){return a(null),c(!1),void m(null)}))}}),[t,a,r,c]),l}a(222);function w(e){return r.a.createElement("div",{className:"search-wrapper"},r.a.createElement("input",{placeholder:"Search..."}),r.a.createElement("div",null,r.a.createElement("div",{className:"body"},r.a.createElement(u.b,{size:20,className:"icon",color:"white"}))))}function k(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useContext)(Oe),m=l.setIsLoggedIn,u=l.setToken,f=function(t){var a=t.to,n=Object(i.a)(t,["to"]);return r.a.createElement(d.a,Object.assign({onClick:function(){return e.redirect(a)}},n))};return r.a.createElement(v.a,{isOpen:c,toggle:function(){return o(!c)},nav:!0},r.a.createElement(E.a,{caret:!0,className:"login-account"},"Hey, ",e.name),r.a.createElement(p.a,{right:!0},r.a.createElement(f,{to:"/user"},"Profile"),r.a.createElement(f,{to:"/saved-conversations"},"Saved Conversations"),r.a.createElement(f,{to:"/history"},"History"),r.a.createElement(d.a,{divider:!0}),r.a.createElement(f,{to:"/settings"},"Settings"),r.a.createElement(d.a,{divider:!0}),r.a.createElement(d.a,{onClick:function(){u(null),m(!1),e.redirect("/")}},"Log Out")))}var S=Object(m.g)((function(e){var t=Object(n.useContext)(Oe).isLoggedIn,a=y();return r.a.createElement("div",{className:"header"},r.a.createElement(l.b,{to:"/",className:"saloon"},"Saloon"),r.a.createElement(w,null),t&&r.a.createElement(l.b,{to:"/post",className:"login-account"},"Post"),t?r.a.createElement(k,{name:a?a.first_name:void 0,redirect:e.history.push}):r.a.createElement(l.b,{to:"/login",className:"login-account"},"Login"))}));a(228);var C=Object(m.g)((function(e){return r.a.createElement(l.b,{to:e.to,className:[e.location.pathname.includes(e.to)?"selected":"","nav-item"].join(" ")},e.children)})),I=function(){return r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"links"},r.a.createElement(C,{to:"/home"},"Home")))},x=a(200),_=a(201),L=a(213),P=a(202),T=a(214),z=a(203),D=a.n(z),J=a(204),A=a.n(J),V=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(L.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).persist=D()((function(e){window.localStorage.setItem(a.props.name,JSON.stringify(e))}),a.props.debounce),a}return Object(T.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.data;A()(t,this.props.data)||this.persist(this.props.data)}},{key:"componentDidMount",value:function(){var e=window.localStorage.getItem(this.props.name);e&&null!==e&&this.props.onMount(JSON.parse(e))}},{key:"render",value:function(){return null}}]),t}(r.a.Component);V.defaultProps={debounce:300};var B=a(66),F=a(131),q=a(423);function H(e){return r.a.createElement(F.a,Object.assign({matchers:[new q.a("url")]},e))}a(229);function W(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item",onClick:function(){return e.navigate("/conversation/".concat(e.convo_id))}},r.a.createElement("div",{className:"title"},e.title),r.a.createElement("div",{className:"inner"},r.a.createElement(M,e),r.a.createElement("div",{className:"body"},r.a.createElement(H,{content:e.description})))),r.a.createElement("div",{className:"break"}))}function M(e){return r.a.createElement("div",{className:"meta"},r.a.createElement(U,{people:e.contributors,description:e.contributors}),r.a.createElement("div",{className:"creator"},e.creator),r.a.createElement("div",{className:"convo-data"},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,"edited ",e.age),r.a.createElement("div",null,"viewed ",e.views," times")),r.a.createElement("div",{className:"right"},r.a.createElement("div",null,e.votes," votes"),r.a.createElement("div",null,e.comments," comments"))))}function U(e){return r.a.createElement("div",{className:"discussed-by"},r.a.createElement(B.a,{name:e.people[0],round:!0,size:42}),e.people.reduce((function(e,t){return t?e+1:e}),0)>1&&r.a.createElement(B.a,{name:e.people[1],round:!0,size:42}),r.a.createElement("span",{className:"text"},r.a.createElement("div",null,"Discussion by ",e.description)))}var G=Object(m.g)((function(e){var t=e.items,a=[];return r.a.createElement("div",{className:"feed"},(t||[]).map((function(t){return!a.includes(t.convo_id)&&(a.push(t.convo_id),r.a.createElement(W,Object.assign({},t,{key:"Feed/".concat(t.convo_id),navigate:function(t){return e.history.push(t)},description:t.post})))})))}));function K(){var e=Object(n.useContext)(Oe),t=e.token,a=e.setToken,r=e.isLoggedIn,c=e.setIsLoggedIn,o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return Object(n.useEffect)((function(){if(!l){(function(e){return j("/feed",{method:"GET",headers:e?{Authorization:e}:void 0})})(t).then((function(e){return m(e.convos)})).catch((function(e){return a(null),c(!1),void m(null)}))}}),[t,l,a,r,c]),l}var R=function(){var e=K();return r.a.createElement("div",{className:"home"},r.a.createElement(G,{items:e}))},$=a(64);a(265);function Q(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field-title"},e.placeholder),r.a.createElement($.b,e),r.a.createElement($.a,{name:e.name,render:function(e){return r.a.createElement("div",{className:"error"},e.replace("_"," "))}}))}var X=function(e){var t=Object(n.useContext)(Oe),a=t.isLoggedIn,c=t.setIsLoggedIn,o=t.setToken;return a?r.a.createElement(m.a,{to:e.location.state?e.location.state.from.pathname:"/"}):r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Login"),r.a.createElement($.d,{initialValues:{email:"",password:""},onSubmit:function(e,t){(function(e,t){return j("/user/login",{method:"POST",body:{email:e,password:t}})})(e.email,e.password).then((function(e){o(e.token),c(!0)})).catch((function(e){t.setErrors({password:"incorrect password"}),t.setSubmitting(!1)}))}},(function(e){var t=e.isSubmitting;return r.a.createElement($.c,null,r.a.createElement(Q,{type:"text",name:"email",placeholder:"email"}),r.a.createElement(Q,{type:"password",name:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",disabled:t},"Submit"),r.a.createElement("div",{className:"switch-here"},"Don't have an account? Join ",r.a.createElement(l.b,{to:"/register"},"here")))})))},Y=a(55);var Z=function(){var e=Object(n.useContext)(Oe),t=e.setToken,a=e.setIsLoggedIn;return e.isLoggedIn?r.a.createElement(m.a,{to:"/home"}):r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Register"),r.a.createElement($.d,{initialValues:{username:"",password:"",first_name:"",last_name:"",email:""},onSubmit:function(e,n){(function(e){var t=e.username,a=e.password;return j("/user/signup",{method:"POST",body:{username:t,first_name:e.first_name,last_name:e.last_name,password:a,email:e.email}})})(e).then((function(e){t(e.token),a(!0)})).catch((function(e){return n.setFieldError("email","something went wrong")}))},validationSchema:Y.object().shape({first_name:Y.string().required(),last_name:Y.string().required(),username:Y.string().required(),password:Y.string().required()})},(function(e){var t=e.isSubmitting;return r.a.createElement($.c,null,r.a.createElement(Q,{type:"email",name:"email",placeholder:"email"}),r.a.createElement(Q,{type:"text",name:"first_name",placeholder:"first name"}),r.a.createElement(Q,{type:"text",name:"last_name",placeholder:"last name"}),r.a.createElement(Q,{type:"text",name:"username",placeholder:"username"}),r.a.createElement(Q,{type:"password",name:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",disabled:t},"Submit"),r.a.createElement("div",{className:"switch-here"},"Already have an account? Login ",r.a.createElement(l.b,{to:"/login"},"here")))})))},ee=a(54),te=a(211),ae=a.n(te);function ne(e){var t=e.value,a=e.setValue,n=Object(i.a)(e,["value","setValue"]);return r.a.createElement(ae.a,Object.assign({theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link"]]},formats:["bold","italic","underline","strike","link"],value:t||"",onChange:function(e){return a(e)}},n))}function re(e,t){var a=Object(n.useState)({}),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){(function(e){return j("/convo/".concat(e),{method:"GET"})})(e).then((function(e){return o(e)})).catch((function(e){}))}),[e,t]),c}var ce=a(212);function oe(e){return ce({seed:e,luminosity:"dark"})}a(414);function ie(e){var t=e.title,a=e.views,c=e.likes,o=e.isLoggedIn,i=e.isContributor,l=e.navigate,m=e.id,u=Object(n.useState)("NONE"),d=Object(s.a)(u,2),v=d[0],E=d[1];return r.a.createElement("div",{className:"d-title"},r.a.createElement(se,{likes:c,vote:v,setVote:function(e){E(e===v?"NONE":e)}}),r.a.createElement("div",null,r.a.createElement("div",{className:"text"},t),(!o||!i)&&r.a.createElement("div",{className:"join",onClick:function(){return!i&&l({pathname:"/login",state:{from:{pathname:"/conversation/".concat(m)}}})}},"Join Conversation")),r.a.createElement("div",{className:"views"},a," views"))}function se(e){var t=e.likes,a=void 0===t?"0":t,n=e.vote,c=e.setVote;return r.a.createElement("div",{className:"vote"},r.a.createElement(ee.c,{className:"thumb ".concat("UP"===n?"upvoted":""),onClick:function(){return c("UP")}}),r.a.createElement("span",{className:"amount"},a),r.a.createElement(ee.b,{className:"thumb ".concat("DOWN"===n?"upvoted":""),onClick:function(){return c("DOWN")}}))}function le(e){var t=e.posts,a=e.body,n=e.setBody,c=e.submit,o=e.isLoggedIn;return r.a.createElement("div",{className:"discussion"},r.a.createElement("div",{className:"inner"},t&&t.map((function(e,t){return r.a.createElement(me,Object.assign({},e,{key:"".concat(e.contributor,"/").concat(e.time_of_post,"/").concat(t)}))}))),o&&r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement(ne,{value:a,setValue:n}),r.a.createElement("div",{className:"post-button",onClick:c},"Submit")))}function me(e){var t=e.contributor,a=e.post;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item"},r.a.createElement("span",{style:{color:oe(t)}},t,": "),r.a.createElement(H,{content:a})),r.a.createElement("div",{className:"break"}))}function ue(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{className:"comments ".concat(c?"":"minimized")},r.a.createElement("div",{className:"comment-header"},r.a.createElement("div",{className:"button ".concat(c?"rotate":""),onClick:function(){return o(!c)}},r.a.createElement(u.a,null)),r.a.createElement("div",{className:"title ".concat(c?"":"fade")},"Comments")),e.comments.map((function(e,t){return r.a.createElement(de,Object.assign({key:"".concat(e.contributor,"/").concat(e.time_of_comment,"/").concat(t),_showing:c},e))})),r.a.createElement("div",{className:"add ".concat(c?"":"fade")},r.a.createElement("textarea",null),r.a.createElement("button",{type:"submit"},"Submit")))}function de(e){var t=e.time_of_comment,a=e.contributor,c=e.body,o=e._showing,i=e.likes,l=Object(n.useState)(!1),m=Object(s.a)(l,2),u=m[0],d=m[1];return r.a.createElement("div",{className:"comment ".concat(o?"":"fade")},r.a.createElement("div",{className:"meta"},r.a.createElement("div",{className:"contributor",style:{color:oe(a)}},a),r.a.createElement("div",{className:"likes ".concat(u?"upvoted":""),onClick:function(){return d(!u)}},u?i+1:i," ",r.a.createElement(ee.c,{style:{fontSize:"12px"}})),r.a.createElement("div",{className:"time"},t)),r.a.createElement("div",{className:"body"},c))}var ve=function(e){var t=e.match.params.id,a=Object(n.useState)(1),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useContext)(Oe),m=l.token,u=l.isLoggedIn,d=Object(n.useState)(""),v=Object(s.a)(d,2),E=v[0],p=v[1],f=re(t,o);return r.a.createElement("div",{className:"conversation"},r.a.createElement(le,{posts:f.posts,submit:function(){(function(e,t){return j("/post",{method:"POST",headers:{Authorization:e},body:{convo_id:t.convo_id,post:t.post}})})(m,{convo_id:t,post:E}).then((function(){i(-o),p("")})).catch((function(e){}))},body:E,setBody:p,isLoggedIn:u}),r.a.createElement(ie,{title:f.title,views:f.views,likes:f.votes,isLoggedIn:u,isContributor:f.isContributor,navigate:e.history.push,id:t}),r.a.createElement(ue,{comments:f.comments||[]}))},Ee=a(422);a(415),a(416);function pe(e){var t=function(){var e=Object(n.useContext)(Oe);return[e.token,e.setToken]}(),a=Object(s.a)(t,1)[0],c=Object(n.useState)(""),o=Object(s.a)(c,2),i=o[0],l=o[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],v=u[1],E=Object(n.useState)(!1),p=Object(s.a)(E,2),f=p[0],b=p[1];return r.a.createElement("div",{className:"post"},r.a.createElement(fe,{title:i,setTitle:l,body:d,setBody:v}),r.a.createElement("div",{className:"collaborators"},r.a.createElement("div",null,"Collaborators"),r.a.createElement(be,{color:"gray"},"Invited"),r.a.createElement(ge,null),r.a.createElement("div",{className:"post-button",onClick:function(){b(!0),function(e,t){return j("/convo",{method:"POST",headers:{Authorization:e},body:{title:t.title,post:t.body}})}(a,{title:i,body:d}).then((function(t){b(!1),e.history.push("/conversation/".concat(t.convo_id))})).catch((function(e){b(!1)}))}},f?r.a.createElement(Ee.a,{css:"\n                width: 50px;\n                height: 50px;\n                flex: 1;\n              "}):r.a.createElement("div",{className:"text"},"Post"))))}function fe(e){var t=e.title,a=e.setTitle,n=e.body,c=e.setBody;return r.a.createElement("div",{className:"editor"},r.a.createElement("input",{className:"post-title",placeholder:"Title",value:t,onChange:function(e){return a(e.currentTarget.value)}}),r.a.createElement(ne,{value:n,onChange:function(e){return c(e)}}))}function be(e){var t=e.color,a=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"title"},a),r.a.createElement("div",{className:"users"},r.a.createElement(he,{color:t},"Jack Hedaya"),r.a.createElement(he,{color:t},"Abe Kassin"),r.a.createElement(he,{color:t},"Judah Kishk")))}function he(e){var t=e.color,a=void 0===t?void 0:t;return r.a.createElement("div",{className:"user"},r.a.createElement(B.a,{name:e.children,src:e.image||null,round:!0,size:25}),r.a.createElement("span",{className:"name",style:{color:a}},e.children))}function ge(e){return r.a.createElement("div",{className:"invite"},r.a.createElement("div",{className:"title"},"Invite Someone"),r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"clear-input",placeholder:"username",autoComplete:"off"}),r.a.createElement(ee.a,{className:"submit"})))}a(417);var Oe=r.a.createContext();function Ne(e){var t=e.component,a=e.authenticated,n=Object(i.a)(e,["component","authenticated"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var je=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],d=i[1];return r.a.createElement(Oe.Provider,{value:{isLoggedIn:a,setIsLoggedIn:c,token:u,setToken:d}},r.a.createElement(V,{data:{token:u,isLoggedIn:a},debounce:500,onMount:function(e){c(e.isLoggedIn),d(e.token)}}),r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement(I,null),r.a.createElement("div",{className:"content"},r.a.createElement(m.d,null,r.a.createElement(m.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(m.b,{exact:!0,path:"/home",component:R}),r.a.createElement(m.b,{exact:!0,path:"/login",component:X}),r.a.createElement(m.b,{exact:!0,path:"/register",component:Z}),r.a.createElement(m.b,{exact:!0,path:"/conversation/:id",component:ve}),r.a.createElement(Ne,{exact:!0,path:"/post",component:pe,authenticated:a}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[216,1,2]]]);
//# sourceMappingURL=main.1e1e3c41.chunk.js.map